!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=11)}([function(e,t,n){"use strict";var o={api:"https://h5sdk.game.qq.com/api2/H5SDKApi.php",report:"",apptype:4,wxappid:"",networkType:"",h5channel:10030414,h5sdkVersion:"1.7.0",gameVersion:"",reportCount:9,requestCount:0,maxRequestCount:1,tempUserLoginInfo:{},tempReportData:[],tempDate:""};e.exports=o},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(0),r=function(e){return e&&e.__esModule?e:{default:e}}(a);e.exports={getSystemInfoSync:function(){return wx.getSystemInfoSync()},getNetworkType:function(){wx.getNetworkType({success:function(e){r.default.networkType=e.networkType}})},getLaunchOptionsSync:function(){return wx.getLaunchOptionsSync()},getSystem:function(){var e=this.getSystemInfoSync(),t=e.system;return t.indexOf("Android")>-1?"android":t.indexOf("iOS")>-1?"ios":"pc"},getH5SDKVersion:function(){return r.default.h5sdkVersion},getWXsdkVersion:function(){var e=this.getSystemInfoSync(),t=e.SDKVersion;return t=t.replace(/\./g,""),t=t.substring(0,3)},checkSession:function(){return new Promise(function(e,t){wx.checkSession({success:function(t){e(t)},fail:function(e){t(e)}})})},setLog:function(e){var t,n=new Date,i=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getSeconds()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds();r.default.tempReportData.push((t={},o(t,e+"_endTime",i),o(t,""+e,(new Date).getTime()-r.default.tempDate),t))},serialize:function(e){var t=null;if(void 0!==e&&"function"!=typeof e||(t=""),"number"==typeof e&&(t=e.toString()),"boolean"==typeof e&&(t=e?"1":"0"),"object"==(void 0===e?"undefined":i(e))&&(e||(t=""),e instanceof RegExp&&(t=e.toString())),"string"==typeof e&&(t=e),"string"==typeof t)return encodeURIComponent(t);var n=[];if(e instanceof Array){for(var o=0;o<e.length;o++)void 0!==e[o]&&n.push("object"==i(e[o])?"":this.serialize(e[o]));return n.join("|")}for(var o in e)void 0!==e[o]&&(t=null,"object"==i(e[o])?e[o]instanceof Array?(t=e[o],n.push(o+"="+this.serialize(t))):n.push(o+"="):(t=e[o],n.push(o+"="+this.serialize(t))));return n.join("&")}}},function(e,t,n){"use strict";var o=n(0);!function(e){e&&e.__esModule}(o);e.exports={setStorage:function(e,t,n){if(void 0!==n&&null!==n){n=Math.abs(n);var o=Date.now(),i=o+1e3*n}try{wx.setStorageSync(e,t),void 0!==n&&null!==n&&wx.setStorageSync(e+"_expiresIn",i)}catch(e){return!1}return!0},getStorage:function(e){var t=Date.now(),n=wx.getStorageSync(e+"_expiresIn");if(""==n)try{return wx.getStorageSync(e)}catch(e){return null}else{if(n<t)return this.removeStorage(e),null;try{return wx.getStorageSync(e)}catch(e){return null}}},removeStorage:function(e){try{wx.removeStorageSync(e),wx.removeStorageSync(e+"_expiresIn")}catch(e){return!1}return!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET";return function(t,n){return new Promise(function(o,i){var a={url:t,data:n,method:e,success:function(e){o(e)},fail:function(e){i(e)}};"POST"==e&&(a.header={"Content-Type":"GET"==e?"application/json;":"application/x-www-form-urlencoded;"},a.data="reportData="+JSON.stringify(n)),wx.request(a)})}};t.get=o("GET"),t.post=o("POST")},function(t,n,o){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return void 0==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,void 0==t.vRoleID&&""==t.vRoleID?e.vRoleID=-1:e.vRoleID=t.vRoleID,void 0==t.cardID&&""==t.cardID?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, cardID is not empty"}}),!1):(e.CardID=t.cardID,void 0==t.slotID&&""==t.slotID?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, slotID is not empty"}}),!1):(e.SlotID=t.slotID,void 0==t.orderID&&""==t.orderID?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, orderID is not empty"}}),!1):(e.OrderID=t.orderID,void 0==t.iActionId&&""==t.iActionId?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, iActionId is not empty"}}),!1):(e.iActionId=t.iActionId,"object"==l(t.extend)&&(e.extend=t.extend),!0))))}function r(e,t,n){return void 0==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,t.vActionType&&(e.vactiontype=t.vActionType),t.vactiontype&&(e.vactiontype=t.vactiontype),t.c1&&(e.c1=t.c1),t.c2&&(e.c2=t.c2),t.c3&&(e.c3=t.c3),t.c4&&(e.c4=t.c4),t.c5&&(e.c5=t.c5),t.c6&&(e.c6=t.c6),t.c7&&(e.c7=t.c7),t.c8&&(e.c8=t.c8),t.c9&&(e.c9=t.c9),"object"==l(t.extend)&&(e.extend=t.extend),!0}function s(e,t,n){return void 0==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,void 0==t.iCount||""==t.iCount?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, iCount illegal"}}),!1):(e.icount=t.iCount,void 0==t.iSNSType||""==t.iSNSType?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, iSNSType is not empty"}}),!1):(e.vsnstype=t.iSNSType,t.toFriendsOpenid&&(e.vtoopenids=t.toFriendsOpenid),t.toNumberOfFriends&&(e.irecnum=t.toNumberOfFriends),t.iSNSChildType&&(e.vsnssubtype=t.iSNSChildType),"object"==l(t.extend)&&(e.extend=t.extend),!0))}function u(e,t,n){return void 0==t.isubZoneAreaID||""==t.isubZoneAreaID?e.isubZoneAreaID=-1:e.isubZoneAreaID=t.isubZoneAreaID,void 0==t.vRoleID&&""==t.vRoleID?e.vRoleID=-1:e.vRoleID=t.vRoleID,t.combatEffectiveness&&(e.CombatEffectiveness=t.combatEffectiveness),t.playerFriendsNum&&(e.PlayerFriendsNum=t.playerFriendsNum),t.mapID&&(e.MapID=t.mapID),void 0==t.iGuideType&&""==t.iGuideType?(n.fail({data:{iRet:"-9999",sMsg:"param error, iGuideType is not empty"}}),!1):(e.iGuideType=t.iGuideType,void 0==t.iGuideID&&""==t.iGuideID?("object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail({data:{iRet:"-9999",sMsg:"param error, iGuideID is not empty"}}),!1):(e.iGuideID=t.iGuideID,e.ClientVersion=p.default.gameVersion,t.result&&(e.Result=0==t.result?0:1),"object"==l(t.extend)&&(e.extend=t.extend),!0))}function d(t,n){(0,y.reportIdata)(t).then(function(t){-9999==t.iRet?"object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail(e):"object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.success&&n.success(t)}).catch(function(e){"object"==(void 0===n?"undefined":l(n))&&"function"==typeof n.fail&&n.fail(e)})}function f(e,t,n,o){var i={};if("SceneFlow"==e){if(!a(i,t,n))return!1}else if("ActionFlow"==e)r(i,t,n);else if("GuideFlow"==e){if(!u(i,t,n))return!1}else{if("SnsFlow"!=e)return!1;if(!s(i,t,n))return!1}if(!0===o&&"ActionFlow"==e){var f=[];i.reportType=e,f.push(i),d(f,n)}else{var c=wx.getStorageSync("HSDK_report_data");if(""==c&&(c=[]),i.reportType=e,c.push(i),c.length>p.default.reportCount)return d(c,n),wx.removeStorageSync("HSDK_report_data"),!1;try{wx.setStorageSync("HSDK_report_data",c)}catch(e){}}}function c(){wx.onHide(function(){var e=wx.getStorageSync("HSDK_report_data");"object"==(void 0===e?"undefined":l(e))&&e.length>0&&((0,y.reportIdata)(e),wx.removeStorageSync("HSDK_report_data"))})}Object.defineProperty(n,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.Report=f,n.onhideReport=c;var g=o(0),p=i(g),y=o(5),m=o(2);i(m)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=d.default.getSystemInfoSync(),n=d.default.getLaunchOptionsSync(),o=s.default.api+"?"+d.default.serialize({methodCmd:1042,apptype:s.default.apptype,h5game_openid:c.default.getStorage("openid"),h5sdk_sessionid:c.default.getStorage("sdkKey"),h5game_os:d.default.getSystem(),appid:s.default.wxappid,h5channel:void 0==n.query.scene?n.scene:n.query.scene,h5sdkVersion:s.default.h5sdkVersion,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:s.default.networkType}});return new Promise(function(t,n){s.default.wxappid.length<3?n({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):void 0==c.default.getStorage("openid")||null==c.default.getStorage("openid")||""==c.default.getStorage("openid")?n({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):void 0==c.default.getStorage("sdkKey")||null==c.default.getStorage("sdkKey")||""==c.default.getStorage("sdkKey")?n({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,l.post)(o,e).then(function(e){t(e.data)}).catch(function(e){n(e)})})}function a(e){var t=d.default.getSystemInfoSync(),n=(d.default.getLaunchOptionsSync(),s.default.api+"?"+d.default.serialize({methodCmd:1046,apptype:s.default.apptype,h5game_openid:c.default.getStorage("openid"),appid:s.default.wxappid,h5sdkVersion:s.default.h5sdkVersion})),o={h5game_os:d.default.getSystem(),version:void 0==s.default.gameVersion?"":s.default.gameVersion,h5sdkVersion:s.default.h5sdkVersion,dateTime:(new Date).getTime(),sMsg:e,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:s.default.networkType}};return new Promise(function(e,t){s.default.wxappid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):void 0==c.default.getStorage("openid")||null==c.default.getStorage("openid")||""==c.default.getStorage("openid")?t({data:{iRet:"-9999",sMsg:"param error, h5game_openid is not empty"}}):void 0==c.default.getStorage("sdkKey")||null==c.default.getStorage("sdkKey")||""==c.default.getStorage("sdkKey")?t({data:{iRet:"-9999",sMsg:"param error, h5sdk_sessionid is not empty"}}):(0,l.post)(n,o).then(function(t){e(t.data)}).catch(function(e){t(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.reportIdata=i,t.reportATM=a;var r=n(0),s=o(r),u=n(1),d=o(u),f=n(2),c=o(f),l=n(3)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){r.default.wxappid=e.wxappid,r.default.gameVersion=e.gameVersion,u.default.getNetworkType(),(0,d.onhideReport)()}Object.defineProperty(t,"__esModule",{value:!0}),t.Init=i;var a=n(0),r=o(a),s=n(1),u=o(s),d=n(4)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),r=o(a),s=n(12),u=o(s),d=n(2),f=o(d),c=n(0),l=o(c),g=n(5);e.exports={login:function(e){var t=this;void 0===e||i(e);t.getLogin().then(function(n){n.code?(r.default.setLog("login_success"),l.default.tempDate=new Date,f.default.getStorage("scopeUserInfo")||r.default.getWXsdkVersion()<206?t.getUserinfoLowVersion(e,n):t.getLoginState(n,e)):(r.default.setLog("getLoginCode_fail"),"function"==typeof e.fail&&e.fail(n))}).catch(function(t){r.default.setLog("login_fail"),"function"==typeof e.fail&&e.fail(t)})},getLoginState:function(e,t){this.getLoginKey(e.code,{}).then(function(){var e={userInfo:{h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey")}};null!=f.default.getStorage("unionid")&&(e.userInfo.unionid=f.default.getStorage("unionid")),e.needCreateUserInfoBtn=!0,r.default.setLog("getLoginKey_success"),"function"==typeof t.success&&t.success(e)}).catch(function(e){(0,g.reportATM)(e),r.default.setLog("getLoginKey_fail"),"function"==typeof t.fail&&t.fail(e)})},getUserinfoLowVersion:function(e,t){var n=this;u.default.getUserInfo(e).then(function(o){r.default.setLog("getUserInfo_success"),f.default.setStorage("scopeUserInfo",!0),l.default.tempDate=new Date,n.getLoginKey(t.code,o.userInfo).then(function(){var t={encryptedData:o.encryptedData,errMsg:o.errMsg,iv:o.iv,rawData:o.rawData,signature:o.signature,userInfo:{avatarUrl:o.userInfo.avatarUrl,city:o.userInfo.city,country:o.userInfo.country,gender:o.userInfo.gender,h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey"),language:o.userInfo.language,nickName:o.userInfo.nickName,province:o.userInfo.province}};null!=f.default.getStorage("unionid")&&(t.userInfo.unionid=f.default.getStorage("unionid")),r.default.setLog("getLoginKey_success"),"function"==typeof e.success&&e.success(t)}).catch(function(t){(0,g.reportATM)(t),r.default.setLog("getLoginKey_fail"),"function"==typeof e.fail&&e.fail(t)})}).catch(function(o){r.default.setLog("getUserInfo_fail"),l.default.tempDate=new Date,n.getLoginKey(t.code,{}).then(function(){var t={userInfo:{h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey")}};null!=f.default.getStorage("unionid")&&(t.userInfo.unionid=f.default.getStorage("unionid")),r.default.setLog("getLoginKey_success"),!0===e.canUserInfoPlay?(n.reportLoginFail(2,o.errMsg),"function"==typeof e.fail&&e.fail(o)):/auth\sdeny/.test(o.errMsg)?"function"==typeof e.success&&e.success(t):(n.reportLoginFail(1,o.errMsg),"function"==typeof e.fail&&e.fail(o))}).catch(function(t){r.default.setLog("getLoginKey_fail"),"function"==typeof e.fail&&e.fail(t)})})},getLogin:function(){var e=this;return new Promise(function(t,n){wx.login({success:function(e){t(e)},fail:function(t){n(t),e.reportLoginFail(1,t.errMsg)}})})},getLoginKey:function(e,t){var n=this;return new Promise(function(o,a){function r(){u.default.getLoginKey(e,t).then(function(){l.default.requestCount=0,o()}).catch(function(e){var t=void 0==e.errMsg?e.sMsg:e.errMsg;n.reportLoginFail(1,t),t=JSON.stringify(e),/timed\sout/.test(t)||/time\sout/.test(t)||/timedout/.test(t)||/timeout/.test(t)||/failed\sto\sconnect\sto/.test(t)||/请求超时/.test(t)?l.default.requestCount>=l.default.maxRequestCount?("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginKey",e.requestCount=l.default.requestCount),a(e)):(r(),l.default.requestCount++):("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginKey"),a(e))})}r()})},reportUserInfo:function(e,t,n){var o=r.default.getSystemInfoSync(),i=[{reportType:"userprofile",isubZoneAreaID:-1,gender:e.gender,country:e.country,province:e.province,city:e.city,model:o.model,vflag:t}];if(0==t){var a=r.default.getLaunchOptionsSync(),s={reportType:"PlayerLogin_fail",isubZoneAreaID:-1,version:void 0==l.default.gameVersion?"":l.default.gameVersion,regChannel:l.default.h5channel,h5channel:void 0==a.query.scene?a.scene:a.query.scene,iactionid:2,iresult:-1,extend:{sMsg:n}};void 0==a.query.openid||""==a.query.openid||1007!=a.query.scene&&1008!=a.query.scene||(s.shareOpenid=a.query.openid,s.shareStatus=13==a.query.shareStatus?13:-1),i.push(s)}(0,g.reportIdata)(i)},reportLoginFail:function(e,t){var n=r.default.getLaunchOptionsSync(),o={reportType:"PlayerLogin_fail",isubZoneAreaID:-1,version:void 0==l.default.gameVersion?"":l.default.gameVersion,regChannel:l.default.h5channel,h5channel:void 0==n.query.scene?n.scene:n.query.scene,iactionid:e,iresult:-1,extend:{sMsg:t}};void 0==n.query.openid||""==n.query.openid||1007!=n.query.scene&&1008!=n.query.scene||(o.shareOpenid=n.query.openid,o.shareStatus=13==n.query.shareStatus?13:-1);var i=[o];(0,g.reportIdata)(i)},createUserInfoButton:function(e){if(r.default.getWXsdkVersion()>205){e.lang=void 0==e.lang?"zh_CN":e.lang;var t=wx.createUserInfoButton(e),n=this;return t.onTap(function(e){/auth\sdeny/.test(e.errMsg)?n.reportUserInfo({gender:-1,country:"",province:"",city:""},0,e.errMsg):(f.default.setStorage("scopeUserInfo",!0),n.reportUserInfo(e.userInfo,1))}),t}},getLoginUserInfo:function(e){var t=this;return new Promise(function(n,o){function a(){u.default.getLoginUserInfo(e).then(function(){l.default.requestCount=0,n()}).catch(function(e){var n=void 0==e.errMsg?e.sMsg:e.errMsg;t.reportLoginFail(1,n),n=JSON.stringify(n),/timed\sout/.test(n)||/time\sout/.test(n)||/timedout/.test(n)||/timeout/.test(n)||/failed\sto\sconnect\sto/.test(n)||/请求超时/.test(n)?l.default.requestCount>=l.default.maxRequestCount?("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginUserInfo",e.requestCount=l.default.requestCount),o(e)):(a(),l.default.requestCount++):("object"==(void 0===e?"undefined":i(e))&&(e.errfrom="h5sdk getLoginUserInfo"),o(e))})}a()})},checkLogin:function(e){var t=this;l.default.tempDate=(new Date).getTime(),null==f.default.getStorage("openid")||null==f.default.getStorage("sdkKey")||f.default.getStorage("openid").length<8||f.default.getStorage("sdkKey").length<8?t.login(e):f.default.getStorage("scopeUserInfo")||r.default.getWXsdkVersion()<206?t.getUserinfoLowVersionByStorage(e):t.checkUserLoginStatus(e)},checkUserLoginStatus:function(e){var t=this;t.getLoginUserInfo({}).then(function(){var t={userInfo:{h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey")}};null!=f.default.getStorage("unionid")&&(t.userInfo.unionid=f.default.getStorage("unionid")),t.needCreateUserInfoBtn=!0,"function"==typeof e.success&&e.success(t)}).catch(function(n){"object"==(void 0===n?"undefined":i(n))&&"object"==i(n.data)&&"-9201"==n.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(n)})},getUserinfoLowVersionByStorage:function(e){var t=this;u.default.getUserInfo(e).then(function(n){r.default.setLog("getUserInfo_success"),l.default.tempDate=(new Date).getTime(),f.default.setStorage("scopeUserInfo",!0),t.getLoginUserInfo(n.userInfo).then(function(){r.default.setLog("checkUserLoginStatus");var t={encryptedData:n.encryptedData,errMsg:n.errMsg,iv:n.iv,rawData:n.rawData,signature:n.signature,userInfo:{avatarUrl:n.userInfo.avatarUrl,city:n.userInfo.city,country:n.userInfo.country,gender:n.userInfo.gender,h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey"),language:n.userInfo.language,nickName:n.userInfo.nickName,province:n.userInfo.province}};null!=f.default.getStorage("unionid")&&(t.userInfo.unionid=f.default.getStorage("unionid")),"function"==typeof e.success&&e.success(t)}).catch(function(n){r.default.setLog("checkLoginState"),"object"==(void 0===n?"undefined":i(n))&&"object"==i(n.data)&&"-9201"==n.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(n)})}).catch(function(n){!0===e.canUserInfoPlay?(r.default.setLog("getUserInfo_fail"),t.reportLoginFail(2,n.errMsg),"function"==typeof e.fail&&e.fail(n)):/auth\sdeny/.test(n.errMsg)?(r.default.setLog("checkLoginState_start"),t.getLoginUserInfo({}).then(function(){r.default.setLog("checkLoginState_success");var t={userInfo:{h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey")}};null!=f.default.getStorage("unionid")&&(t.userInfo.unionid=f.default.getStorage("unionid")),"function"==typeof e.success&&e.success(t)}).catch(function(n){r.default.setLog("checkLoginState_fail"),l.default.tempDate=(new Date).getTime(),"object"==(void 0===n?"undefined":i(n))&&"object"==i(n.data)&&"-9201"==n.data.iRet?t.login(e):"function"==typeof e.fail&&e.fail(n)})):(r.default.setLog("getUserInfo_fail"),t.reportLoginFail(1,n.errMsg),"function"==typeof e.fail&&e.fail(n))})}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(10),r=o(a),s=n(1),u=o(s),d=n(2),f=o(d);e.exports={setUserSnsData:function(e){if("option"!=typeof e&&void 0!=i(e.rankVal)){var t=u.default.getSystemInfoSync();u.default.getLaunchOptionsSync(),r.default.apptype,f.default.getStorage("openid"),f.default.getStorage("sdkKey"),u.default.getSystem(),r.default.wxappid,r.default.h5channel,e.rankVal,t.version,t.system,t.model,r.default.networkType;return new Promise(function(t,n){get(r.default.api,sendData).then(function(t){"function"==typeof e.success&&e.success(t)}).catch(function(t){"function"==typeof e.fail&&e.fail(res)})})}},exitMiniProgram:function(e){wx.exitMiniProgram({success:function(t){"function"==typeof e.success&&e.success(t)},fail:function(t){"function"==typeof e.fail&&e.fail(t)},complete:function(t){"function"==typeof e.complete&&e.complete(t)}})},getSessionInfo:function(){return{h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey")}},openTencentGameContract:function(){"function"==typeof wx.openTencentGameContract&&wx.openTencentGameContract()},openTencentPrivacyContract:function(){"function"==typeof wx.openTencentPrivacyContract&&wx.openTencentPrivacyContract()},openTencentBoardGameContract:function(){"function"==typeof wx.openTencentBoardGameContract&&wx.openTencentBoardGameContract()}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(13),r=n(2),s=o(r),u=n(1),d=o(u);e.exports={share:function(e){wx.showShareMenu({withShareTicket:!0}),wx.onShareAppMessage(function(t){var n={},o=e;if("function"==typeof e&&(o=e()),"object"==i(o.shareInfo))return n.title=o.shareInfo.title,void 0!=o.shareInfo.imageUrl&&""!=o.shareInfo.imageUrl&&(n.imageUrl=o.shareInfo.imageUrl),void 0!=o.shareInfo.query&&""!=o.shareInfo.query?n.query=o.shareInfo.query+"&openid="+s.default.getStorage("openid"):n.query="openid="+s.default.getStorage("openid"),void 0!=o.shareInfo.canvas&&""!=o.shareInfo.canvas&&(n.canvas=o.shareInfo.canvas),d.default.getWXsdkVersion()>207?(0,a.shareReport)({shareResult:0,iActionId:1}):(n.success=function(e){(0,a.shareReport)({shareResult:0,iActionId:1}),"function"==typeof o.success&&o.success(e)},n.fail=function(e){(0,a.shareReport)({shareResult:1,iActionId:1}),"function"==typeof o.fail&&o.fail(e)}),n})},shareMessage:function(e){var t={};t.title=e.shareInfo.title,void 0!=e.shareInfo.imageUrl&&""!=e.shareInfo.imageUrl&&(t.imageUrl=e.shareInfo.imageUrl),void 0!=e.shareInfo.query&&""!=e.shareInfo.query?t.query=e.shareInfo.query+"&openid="+s.default.getStorage("openid"):t.query="openid="+s.default.getStorage("openid"),void 0!=e.shareInfo.canvas&&""!=e.shareInfo.canvas&&(t.canvas=e.shareInfo.canvas),d.default.getWXsdkVersion()>207?(0,a.shareReport)({shareResult:0,iActionId:2,gameScene:e.shareInfo.gameScene}):(t.success=function(t){(0,a.shareReport)({shareResult:0,iActionId:2,gameScene:e.shareInfo.gameScene}),"function"==typeof e.success&&e.success(t)},t.fail=function(t){(0,a.shareReport)({shareResult:1,iActionId:2,gameScene:e.shareInfo.gameScene}),"function"==typeof e.fail&&e.fail(t)},t.complete=function(t){"function"==typeof e.complete&&e.complete(t)}),wx.shareAppMessage(t)}}},function(e,t,n){"use strict";var o={wegameUrl:location.protocol+"//wximg.gtimg.com/wxgame/wegame-v2.js",qqapi:location.protocol+"//open.mobile.qq.com/sdk/qqapi.js?_bid=152",wxappid:"",qqappid:"",shareInfo:{image_url:"",title:"",desc:""},h5sdkApi:{default:"h5sdk.game.qq.com",snake:"snake.h5sdk.game.qq.com",h5game:"peng.h5sdk.game.qq.com"},enbaleRightDragToGoBackParams:!1,isNeedPayToken:!0,isNeeduserInfo:!0,isDebug:!1,startTime:0,log:"",countwxloginapi:0,beaconHttpUrl:"https:"==location.protocol?"https://3gimg.qq.com/mig_op/beacon/js/beacon_release_s.js?":"http://3gimg.qq.com/mig_op/beacon/js/beacon_release.js?",version:"v1.6.5"};e.exports=o},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(1),a=o(i),r=n(6),s=n(7),u=o(s),d=n(9),f=o(d),c=n(8),l=o(c),g=n(0),p=o(g),y=n(4);window.H5SDK={},window.H5SDK.tempReportData=p.default.tempReportData,window.H5SDK.init=function(e){(0,r.Init)(e)},window.H5SDK.getH5SDKVersion=function(){return a.default.getH5SDKVersion()},window.H5SDK.checkLogin=function(e){u.default.checkLogin(e)},window.H5SDK.createUserInfoButton=function(e,t){return u.default.createUserInfoButton(e,t)},window.H5SDK.getWXSDKVersion=function(){return a.default.getWXsdkVersion()},window.H5SDK.share=function(e){f.default.share(e)},window.H5SDK.shareMessage=function(e){f.default.shareMessage(e)},window.H5SDK.getSessionInfo=function(e){return l.default.getSessionInfo()},window.H5SDK.setUserSnsData=function(e){l.default.setUserSnsData()},window.H5SDK.report=function(e,t,n,o){(0,y.Report)(e,t,n,o)},window.H5SDK.exitMiniProgram=function(e){l.default.exitMiniProgram(e)},window.H5SDK.openTencentGameContract=function(){l.default.openTencentGameContract()},window.H5SDK.openTencentPrivacyContract=function(){l.default.openTencentPrivacyContract()},window.H5SDK.openTencentBoardGameContract=function(){l.default.openTencentBoardGameContract()}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(0),a=o(i),r=n(1),s=o(r),u=n(2),d=o(u),f=n(3);e.exports={getLoginKey:function(e,t){var n=s.default.getSystemInfoSync(),o=Math.random(),i=s.default.getLaunchOptionsSync(),r={h5game_code:e,methodCmd:1034,apptype:a.default.apptype,h5game_os:s.default.getSystem(),appid:a.default.wxappid,h5channel:void 0==i.query.scene?i.scene:i.query.scene,gender:void 0==t.gender?-1:t.gender,country:void 0==t.country?-1:t.country,province:void 0==t.province?-1:t.province,city:void 0==t.city?-1:t.city,regChannel:a.default.h5channel,version:void 0==a.default.gameVersion?"":a.default.gameVersion,h5sdkVersion:a.default.h5sdkVersion,user_agent:{channelversion:n.version,system:n.system,model:n.model,networkType:a.default.networkType},random:o},u=new Date,c=u.getFullYear()+"/"+(u.getMonth()+1)+"/"+u.getSeconds()+" "+u.getHours()+":"+u.getMinutes()+":"+u.getSeconds();return a.default.tempReportData.push({getLoginKey_random:o,getLoginKey_start:c}),void 0==i.query.openid||""==i.query.openid||1007!=i.query.scene&&1008!=i.query.scene||(r.shareOpenid=i.query.openid,r.shareStatus=13==i.query.shareStatus?13:-1),new Promise(function(e,t){r.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):(0,f.get)(a.default.api,r).then(function(n){if("-9201"==n.data.iRet||"40029"==n.data.iRet||"-9999"==n.data.iRet)t(n);else{var o=n.data;d.default.setStorage("sdkKey",o.list.h5sdk_sessionid,86400),d.default.setStorage("openid",o.list.openid,86400),o.list.unionid&&d.default.setStorage("unionid",o.list.unionid,86400),e(o)}}).catch(function(e){t(e)})})},getUserInfo:function(e){return new Promise(function(t,n){wx.getUserInfo({lang:void 0==e.lang?"zh_CN":e.lang,success:function(e){t(e)},fail:function(e){n(e)}})})},getLoginUserInfo:function(e){var t=s.default.getSystemInfoSync(),n=s.default.getLaunchOptionsSync(),o=Math.random(),i={methodCmd:1039,apptype:a.default.apptype,h5game_openid:d.default.getStorage("openid"),h5sdk_sessionid:d.default.getStorage("sdkKey"),no_strong_check:0,h5game_os:s.default.getSystem(),appid:a.default.wxappid,h5channel:void 0==n.query.scene?n.scene:n.query.scene,gender:void 0==e.gender?-1:e.gender,country:void 0==e.country?-1:e.country,province:void 0==e.province?-1:e.province,city:void 0==e.city?-1:e.city,regChannel:a.default.h5channel,version:void 0==a.default.gameVersion?"":a.default.gameVersion,h5sdkVersion:a.default.h5sdkVersion,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:a.default.networkType},random:o},r=new Date,u=r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getSeconds()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();return a.default.tempReportData.push({checkUserLoginStatus_random:o,checkUserLoginStatus_start:u}),void 0==n.query.openid||""==n.query.openid||1007!=n.query.scene&&1008!=n.query.scene||(i.shareOpenid=n.query.openid,i.shareStatus=13==n.query.shareStatus?13:-1),new Promise(function(e,t){i.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):void 0==i.h5game_openid||null==i.h5game_openid||""==i.h5game_openid?t({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):void 0==i.h5sdk_sessionid||null==i.h5sdk_sessionid||""==i.h5sdk_sessionid?t({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,f.get)(a.default.api,i).then(function(n){"-9201"==n.data.iRet||"40029"==n.data.iRet||"-9999"==n.data.iRet?t(n):e(n)}).catch(function(e){t(e)})})}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getSystemInfoSync(),n=u.default.getLaunchOptionsSync(),o={methodCmd:1014,apptype:r.default.apptype,logtype:"share",h5game_openid:f.default.getStorage("openid"),h5sdk_sessionid:f.default.getStorage("sdkKey"),result:e.shareResult,h5game_os:u.default.getSystem(),appid:r.default.wxappid,h5channel:void 0==n.query.scene?n.scene:n.query.scene,version:void 0==r.default.gameVersion?"":r.default.gameVersion,iActionId:e.iActionId,shareOpenid:f.default.getStorage("openid"),shareStatus:13,user_agent:{channelversion:t.version,system:t.system,model:t.model,networkType:r.default.networkType}};return 2==e.iActionId&&(o.scene=void 0==e.gameScene?-1:e.gameScene),new Promise(function(e,t){o.appid.length<3?t({data:{iRet:"-9999",sMsg:"param error, appid illegal"}}):void 0==o.h5game_openid||null==o.h5game_openid||""==o.h5game_openid?t({data:{iRet:"-9999",sMsg:"h5game_openid is not empty"}}):void 0==o.h5sdk_sessionid||null==o.h5sdk_sessionid||""==o.h5sdk_sessionid?t({data:{iRet:"-9999",sMsg:"h5sdk_sessionid is not empty"}}):(0,c.get)(r.default.api,o).then(function(t){e(t.data)}).catch(function(e){t(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.shareReport=i;var a=n(0),r=o(a),s=n(1),u=o(s),d=n(2),f=o(d),c=n(3)}]);