function _p_(t,e,n,o,r,i){return void 0===e&&(e={}),void 0===n&&(n=!0),void 0===o&&(o=NetCode.HTTP_SERVER),void 0===r&&(r=!1),void 0===i&&(i=!0),e.command=t,{command:t,params:e,mask:n,cache:r,requestUrl:o,reload:i}}var global=window,egret=window.egret,__reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);n.prototype=e.prototype,t.prototype=new n},__read=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,r,i=n.call(t),a=[];try{for(;(void 0===e||e-->0)&&!(o=i.next()).done;)a.push(o.value)}catch(s){r={error:s}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return a},__spread=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(__read(arguments[e]));return t},__awaiter=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(e){i(e)}}function s(t){try{c(o["throw"](t))}catch(e){i(e)}}function c(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(a,s)}c((o=o.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return o([t,e])}}function o(n){if(r)throw new TypeError("Generator is already executing.");for(;c;)try{if(r=1,i&&(a=i[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,i=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){c.label=n[1];break}if(6===n[0]&&c.label<a[1]){c.label=a[1],a=n;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(n);break}a[2]&&c.ops.pop(),c.trys.pop();continue}n=e.call(t,c)}catch(o){n=[6,o],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__values=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},__decorate=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,a=3>i?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(3>i?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},core;!function(t){var e=function(){function t(e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.mediatorName=null,this.viewComponent=null,this.mediatorName=null!=e?e:t.NAME,this.viewComponent=n}return t.prototype.getMediatorName=function(){return this.mediatorName},t.prototype.getViewComponent=function(){return this.viewComponent},t.prototype.setViewComponent=function(t){this.viewComponent=t},t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(t){},t.prototype.onRegister=function(){},t.prototype.onRemove=function(){},t.NAME="Mediator",t}();t.Mediator=e,__reflect(e.prototype,"core.Mediator",["core.IMediator"])}(core||(core={}));var core;!function(t){var e=function(){function t(t,e){this.bindCallback=t.bind(e),this.callback=t,this.thisObj=e}return t}();t.Callback=e,__reflect(e.prototype,"core.Callback")}(core||(core={}));var core;!function(t){var e=function(t){function e(e,n){var o=t.call(this)||this;return o.messageID=e,o.messageData=n,o}return __extends(e,t),e}(egret.HashObject);t.EventData=e,__reflect(e.prototype,"core.EventData",["core.IMessage"])}(core||(core={}));var core;!function(t){function e(){return function(e){return t.registerMediator(new e),e}}function n(e){return function(n,o,r){return t.addNotification(e,r.value,n),r.value}}function o(e){t.singleton(y).registerMediator(e)}function r(e){t.singleton(y).retrieveMediator(e)}function i(e){t.singleton(y).hasMediator(e)}function a(e){t.singleton(y).removeMediator(e)}function s(e){t.singleton(y).registerModel(e)}function c(e){t.singleton(y).retrieveModel(e)}function u(e){t.singleton(y).hasModel(e)}function h(e){t.singleton(y).removeModel(e)}function p(e,n,o,r){void 0===r&&(r=0),t.singleton(y).registerObserver(e,new t.Observer(n,o,r))}function l(e,n,o){void 0===n&&(n=null),void 0===o&&(o=null),t.singleton(y).notifyObservers(new t.Notification(e,n,o))}function f(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=new t.Notification(e,n,null);r.setArrFormat(!0),t.singleton(y).notifyObservers(r)}function d(e,n){t.singleton(y).removeObserver(e,n)}function g(e){t.singleton(y).removeObserverByName(e)}function m(e){t.singleton(y).removeObserverByContext(e)}function _(e,n){return t.singleton(y).checkObserver(e,n)}t.mediator=e,t.notice=n;var y=function(){function e(){if(this._observerMap=null,this._mediatorMap=null,this._modelMap=null,this._instance)throw Error("MVCSystem singleton already constructed!");this._instance=this,this._observerMap={},this._mediatorMap={},this._modelMap={}}return e.prototype.registerMediator=function(e){var n=e.getMediatorName();if(this._mediatorMap[n])return void console.warn("该Mediator已经注册啦：",n);this._mediatorMap[n]=e;var o=e.listNotificationInterests(),r=o.length;if(r>0)for(var i=new t.Observer(e.handleNotification,e),a=0;r>a;a++)this.registerObserver(o[a],i);e.onRegister()},e.prototype.retrieveMediator=function(t){return this._mediatorMap[t]||null},e.prototype.removeMediator=function(t){var e=this._mediatorMap[t];if(!e)return null;for(var n=e.listNotificationInterests(),o=n.length;o--;)this.removeObserver(n[o],e);return delete this._mediatorMap[t],e.onRemove(),e},e.prototype.hasMediator=function(t){return null!=this._mediatorMap[t]},e.prototype.registerModel=function(t){var e=t.getProxyName();this._modelMap[e]||(this._modelMap[e]=t,t.onRegister())},e.prototype.removeModel=function(t){var e=this._modelMap[t];return e&&(delete this._modelMap[t],e.onRemove()),e},e.prototype.retrieveModel=function(t){return this._modelMap[t]||null},e.prototype.hasModel=function(t){return null!=this._modelMap[t]},e.prototype.registerObserver=function(t,e){var n=this._observerMap[t];n&&n.length>0?this.checkObserver(t,e.getNotifyContext())?console.warn("registerObserver重复注册:",t):(n.push(e),n.sort(function(t,e){return e.getPriority()-t.getPriority()})):this._observerMap[t]=[e]},e.prototype.checkObserver=function(t,e){for(var n=this._observerMap[t],o=n.length,r=0;o>r;r++){var i=n[r];if(i.compareNotifyContext(e))return!0}return!1},e.prototype.notifyObservers=function(t){var e=t.getName(),n=this._observerMap[e];if(n)for(var o=n.slice(0),r=o.length,i=0;r>i;i++){var a=o[i];a.notifyObserver(t)}},e.prototype.removeObserver=function(t,e){var n=this._observerMap[t];if(n)for(var o=n.length;o--;){var r=n[o];if(r.compareNotifyContext(e)){n.splice(o,1);break}}},e.prototype.removeObserverByName=function(t){this._observerMap[t]=[]},e.prototype.removeObserverByContext=function(t){for(var e in this._observerMap)this.removeObserver(e,t)},e}();t.MVCSystem=y,__reflect(y.prototype,"core.MVCSystem"),t.registerMediator=o,t.retrieveMediator=r,t.hasMediator=i,t.removeMediator=a,t.registerModel=s,t.retrieveModel=c,t.hasModel=u,t.removeModel=h,t.addNotification=p,t.sendNotification=l,t.postNotification=f,t.removeNotification=d,t.removeNotificationByName=g,t.removeNotificationByContext=m,t.hasNotification=_}(core||(core={}));var core;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n.removeing=!1,n._compState=new t.ComponentState(n),n}return __extends(n,e),n.prototype.onExit=function(){this._compState.dispose(),this._animation=null,this._data=null},n.prototype.onEnter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.btnClose&&(this.listener(this.btnClose,egret.TouchEvent.TOUCH_TAP,this.onClose,this),this.btnClose.name="btnClose"),this.imgClose&&this.listener(this.imgClose,egret.TouchEvent.TOUCH_TAP,this.onClose,this),this._animation&&this._animation.open()},n.prototype.setData=function(t){this.data=t,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data")},Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,this.dataChange(t)},enumerable:!0,configurable:!0}),n.prototype.dataChange=function(t){},n.prototype.onClose=function(){var e=this;this._animation?this._animation.close().then(function(){t.UI.remove(e)}):t.UI.remove(this)},n.prototype.listener=function(t,e,n,o){this._compState.listener(t,e,n,o)},n.prototype.initEventListener=function(){this._compState.initEventListener()},n.prototype.setFull=function(){this._compState.setFull()},n.prototype.getArgs=function(){return this._compState.getArgs()},n.prototype.setArgs=function(t){this._compState.setArgs(t)},n.prototype.setUiType=function(t){this._compState.setUiType(t)},n.prototype.getUiType=function(){return this._compState.getUiType()},n.prototype.getAnimation=function(){return this._animation},n.prototype.setAnimation=function(t){this._animation=t},n.prototype.getChildView=function(e){return this[e]?this[e]:t.display.getChildByName(e,this)},n.prototype.destoryData=function(){t.display.destoryChildren(this)},n}(eui.Component);t.BaseComponent=e,__reflect(e.prototype,"core.BaseComponent",["core.IComponent","egret.DisplayObject"]),window.BaseComponent=e}(core||(core={}));var UiAnimation=function(){function t(t){this._component=t}return t.prototype.open=function(){return Promise.resolve()},t.prototype.close=function(){return Promise.resolve()},t}();__reflect(UiAnimation.prototype,"UiAnimation",["core.IUiAnimation"]);var NetCode=function(){function t(){}return Object.defineProperty(t,"LB_PATH",{get:function(){return"wxgame"==window.platform.name?GameVo.isIos?"https://h5yy167.hyinteractive.com/socket_command_route.ac":"https://mqyy.hyinteractive.com/socket_command_route.ac":"http://bj.appcup.com:10040/socket_command_route.ac"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RES_ROOT_PATH",{get:function(){var t="http://127.0.0.1:3333/EgretWxgameTemplate/EgretTemplateProject_wxgame_remote/";return t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RES_PATH",{get:function(){return""+t.RES_ROOT_PATH+GameVo.resourceVersion+"/resource"},enumerable:!0,configurable:!0}),t.versionCode=118,t.HTTP_SERVER="",t.areaId=0,t.GET_SERVERPATH=300,t.TEST_REWARD=2e4,t.SecretKey="abc@@&&&sdfseeeeeiuiu",t.LOAD_CONFIG=20006,t.GET_USER_ID=20001,t.GET_USER_INFO_BY_ID=20002,t.SECOND_USER_DATA=20012,t.SYNC_TIME=20007,t.CLEAR_DAILY_INFO=20009,t.CREAT_USER=20003,t.PUSH_ERROE=20011,t.GAME_SHARE=66666,t.FINISH_GUIDE_TASK=20010,t.UPDATE_RECHARGE_INFO=20008,t.GET_SHOP_GOODS_LIST=400,t.GET_PAY_LIST=400,t.ADD_PAY=410,t.BACK_PAY=420,t}();__reflect(NetCode.prototype,"NetCode");var core;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._sound=!0,e}return __extends(e,t),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},Object.defineProperty(e.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),e.prototype.onRendererTouchEnd=function(e){if(this._sound&&AudioManager.playerSoundMusic("button_mp3"),this._verifyCallback){var n=(o=this._verifyCallback).call.apply(o,__spread([this._context],this._args));n&&t.prototype.onRendererTouchEnd.call(this,e)}else t.prototype.onRendererTouchEnd.call(this,e);var o},e.prototype.onVerifyCallback=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this._verifyCallback=t,this._context=e,this._args=n},e}(eui.TabBar);t.TabBar=e,__reflect(e.prototype,"core.TabBar"),window.TabBar=e}(core||(core={}));var core;!function(t){var e;!function(t){t[t.DRAGON=0]="DRAGON",t[t.DBFAST=1]="DBFAST",t[t.MOVIECLIP=2]="MOVIECLIP",t[t.SEQUNCE_MOVIE=3]="SEQUNCE_MOVIE"}(e||(e={}));var n=function(){function n(){}return n.create=function(n,o,r){var i,a=n.split("/");a[a.length-1];switch(o){case e.MOVIECLIP:i=new t.MovieClip,i.isCache=!1,i.setPath(n);break;case e.SEQUNCE_MOVIE:break;default:throw new Error("创建动画错误,动画类型:"+o)}return i},n.fast=function(t,n){var o=this.create("assets/animation/fast/"+n,e.DBFAST);return t.actionName=t.actionName&&""!=t.actionName?t.actionName:"1",this.play(o,t),o},n.play=function(e,n){var o=n.playTimes?n.playTimes:0;e.play(n.actionName,o),e.touchEnabled=!1,e.once(t.MovieEvent.COMPLETE,function(){n.onComplete&&n.onComplete()},this),e.scaleX=n.scaleX?n.scaleX:1,e.scaleY=n.scaleY?n.scaleY:1,n.container?(n.container.addChild(e),e.x=n.container.width/2+(n.offsetX||0),e.y=n.container.height/2+(n.offsetY||0)):(t.stage.addChild(e),e.x=t.stage.width/2+(n.offsetX||0),e.y=t.stage.height/2+(n.offsetY||0))},n.getFilenameWithoutExt=function(t){var e=t.split("/"),n=e[e.length-1];return e=n.split("."),e[0]},n}();t.BaseFactory=n,__reflect(n.prototype,"core.BaseFactory")}(core||(core={}));var core;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isCache=!1,t._atLast=!1,t._mcScaleX=1,t._frameRate=null,t._hasEvent=!1,t}return __extends(n,e),Object.defineProperty(n.prototype,"atLast",{get:function(){return this._atLast},set:function(t){this._atLast=t},enumerable:!0,configurable:!0}),n.prototype.setPath=function(e,n){this._dataPath=e,this._texturePath=n,this._filename=t.BaseFactory.getFilenameWithoutExt(this._dataPath),this.clearMc()},n.prototype.prepareResource=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return t=this.getFactory(),t?[2,new Promise(function(t){t()})]:[3,1];case 1:return[4,RES.getResAsync(this._dataPath)];case 2:return e.sent(),[4,RES.getResAsync(this._texturePath)];case 3:e.sent(),e.label=4;case 4:return[2]}})})},n.prototype.play=function(t,e){var n=this;void 0===e&&(e=0),this.prepareResource().then(function(){n.getMC(t).play(e)})},n.prototype.gotoAndStop=function(t,e){var n=this;this.prepareResource().then(function(){n.getMC(t).gotoAndStop(e)})},n.prototype.gotoAndPlay=function(t,e,n){var o=this;void 0===n&&(n=0),this.prepareResource().then(function(){o.getMC(t).gotoAndPlay(e,n)})},n.prototype.getMC=function(t){if(this._mc)return this.initEvents(),this._mc.anchorOffsetX=.5*(this._mc.width-this._mc.x),this._mc.anchorOffsetY=this._mc.height-this._mc.y-6,this._mc.visible=!0,this._mc;var e=this.getFactory();return e&&(this._mc=new egret.MovieClip(e.generateMovieClipData(t)),this.initEvents(),this._mc.anchorOffsetX=.5*(this._mc.width-this._mc.x),this._mc.anchorOffsetY=this._mc.height-this._mc.y-6,this._mc.scaleX=this._mcScaleX,this.addChild(this._mc)),this._mc.visible=!0,this._mc},n.prototype.getFactory=function(){var t=RES.getRes(this._dataPath),e=RES.getRes(this._texturePath);return t&&e?(this._mc&&this._frameRate&&(this._mc.frameRate=this._frameRate),new egret.MovieClipDataFactory(t,e)):void 0},Object.defineProperty(n.prototype,"frameRate",{get:function(){return this._frameRate},set:function(t){this._frameRate=t},enumerable:!0,configurable:!0}),n.prototype.clearEvents=function(){this._hasEvent&&(this._hasEvent=!1,this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.clearMcEvent())},n.prototype.clearMcEvent=function(){this._mc&&(this._mc.removeEventListener(egret.MovieClipEvent.LOOP_COMPLETE,this.onLoopComplete,this),this._mc.removeEventListener(egret.MovieClipEvent.COMPLETE,this.onComplete,this),this._mc.removeEventListener(egret.MovieClipEvent.FRAME_LABEL,this.onFrameLabel,this))},n.prototype.initEvents=function(){this._hasEvent||(this._hasEvent=!0,this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this._mc&&(this._mc.addEventListener(egret.MovieClipEvent.LOOP_COMPLETE,this.onLoopComplete,this),this._mc.addEventListener(egret.MovieClipEvent.COMPLETE,this.onComplete,this),this._mc.addEventListener(egret.MovieClipEvent.FRAME_LABEL,this.onFrameLabel,this)))},n.prototype.onAddToStage=function(){},n.prototype.onLoopComplete=function(e){this.dispatchEvent(new t.MovieEvent(t.MovieEvent.LOOP_COMPLETE))},n.prototype.onComplete=function(e){this.dispatchEvent(new t.MovieEvent(t.MovieEvent.COMPLETE)),this.atLast||this.removeFromParent(this)},n.prototype.onFrameLabel=function(e){this.dispatchEvent(new t.MovieEvent(t.MovieEvent.FRAME_LABEL,e.frameLabel))},n.prototype.onRemoved=function(t){this.dispose()},n.prototype.dispose=function(){this.clearEvents(),this.removeFromParent(this)},n.prototype.clearMc=function(){this._mc&&(this.removeFromParent(this._mc),this.clearMcEvent(),this._mc=null)},n.prototype.setMcScaleX=function(t){this._mcScaleX=t,this._mc&&(this._mc.scaleX=t)},n.prototype.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},n}(egret.DisplayObjectContainer);t.MovieClip=e,__reflect(e.prototype,"core.MovieClip",["core.IMovie","egret.DisplayObject"])}(core||(core={}));var core;!function(t){var e=function(t){function e(e,n){void 0===n&&(n=null);var o=t.call(this,e)||this;return o._frameLabel=n,o}return __extends(e,t),Object.defineProperty(e.prototype,"frameLabel",{get:function(){return this._frameLabel},enumerable:!0,configurable:!0}),e.FRAME_LABEL="Frame_Label",e.LOOP_COMPLETE="Loop_Complete",e.COMPLETE="Complete",e}(egret.Event);t.MovieEvent=e,__reflect(e.prototype,"core.MovieEvent")}(core||(core={}));var WX=function(){function t(){}return t.prototype.previewImage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getSystemInfo=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getNetworkType=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getLaunchOptionsSync=function(){},t}();__reflect(WX.prototype,"WX",["IWX"]);var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:RequestCacheData.instance.getCache().name,gpid:GameHttp.gpId}]})})},t.prototype.getSessionInfo=function(){},t.prototype.reloadPage=function(){window.location.href=window.location.href},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.sendOpenData=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.getShareInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.setUserCloudStorage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.shareAppMessage=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.checkviserion=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.updateShareMenu=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.createGameClubButton=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.createRewardedVideoAd=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.requestMidasPayment=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.navigateToMiniProgram=function(t,e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t.prototype.wxGC=function(){},t.prototype.getSystemInfoSync=function(){},t.prototype.wxCatchError=function(t){},t.prototype.report=function(t,e,n){},t.prototype.playerBgMusic=function(t){this._bgurl=t,is.ios()?egret.MainContext.instance.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playerBgMusic2,this):this.playerBgMusic2()},t.prototype.playerBgMusic2=function(){this._changeBg&&this._changeBg.stop(),is.ios()&&egret.MainContext.instance.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.playerBgMusic2,this),this._soundBg=RES.getRes(this._bgurl),this._soundBg&&(this._changeBg=this._soundBg.play())},t.prototype.pauseBgMusic=function(){this._changeBg&&this._changeBg.stop()},t.prototype.resumeBgMusic=function(){this._soundBg&&(this._changeBg=this._soundBg.play())},t.prototype.playerSound=function(t){var e=this;if(!this._soundEf){var n=function(t){e._soundEf.play(0,1)};this._soundEf=new egret.Sound,this._soundEf.type=egret.Sound.EFFECT,this._soundEf.addEventListener(egret.Event.COMPLETE,n,this)}this._soundEf.load(t)},t.prototype.name=function(){return"window"},t.prototype.getLaunchOptionsSync=function(){var t={};if(window.location){var e=location.search;if(""==e)return null;e=e.slice(1);for(var n=e.split("&"),o=n.length,r=0;o>r;r++){var i=n[r],a=i.split("=");t[a[0]]=a[1]}}return{query:t}},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var Dictionary=function(){function t(){this.m_keys=[],this.m_values=[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.m_keys.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"values",{get:function(){return this.m_values.concat()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return this.m_keys.concat()},enumerable:!0,configurable:!0}),t.prototype.indexOfKey=function(t){return this.m_keys.indexOf(t)},t.prototype.indexOfValue=function(t){return this.m_values.indexOf(t)},t.prototype.getKeyByValue=function(t){return this.m_keys[this.indexOfValue(t)]},t.prototype.add=function(t,e){var n=this.indexOfKey(t);n>=0?this.m_values[n]=e:(this.m_keys.push(t),this.m_values.push(e))},t.prototype.get=function(t){var e=this.indexOfKey(t);return e>=0?this.m_values[e]:null},t.prototype.remove=function(t){var e=this.indexOfKey(t);return e>=0?(this.m_keys.splice(e,1),this.m_values.splice(e,1)[0]):null},t.prototype.clear=function(){this.m_keys.length=0,this.m_values.length=0},t.prototype.getRandomData=function(){var t=Math.random()*this.keys.length<<0;return this.m_values[t]},t}();__reflect(Dictionary.prototype,"Dictionary");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,o){function r(t){e.call(o,t)}function i(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),n.call(o))}var a=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(o,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("gameEui_json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(o,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var s=t.split("/");s.pop();var c=s.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(o,generateJSON.paths[t])},this):RES.getResByUrl(c,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){e.call(o,generateJSON.paths[t])},a)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(o,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var core;!function(t){var e=function(t){function e(e,n){return t.call(this,e,n)||this}return __extends(e,t),e.prototype.getData=function(){return this.messageData},e}(t.EventData);t.KeyboardEventData=e,__reflect(e.prototype,"core.KeyboardEventData")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.UI_NORMAL_REMOVE="UI_NORMAL_REMOVE",t.UI_REMOVE="UI_REMOVE",t.UI_CLEAR="UI_CLEAR",t.UI_ADD="UI_ADD",t}();t.CoreNotificationDef=e,__reflect(e.prototype,"core.CoreNotificationDef")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.MODULE_SHOW="core.EventID.MODULE_SHOW",t.MODULE_LOADED="core.EventID.MODULE_LOADED",t.MODULE_HIDE="core.EventID.MODULE_HIDE",t.SOCKET_CONNECT="core.EventID.SOCKET_CONNECT",t.SOCKET_DATA="core.EventID.SOCKET_DATA",t.SOCKET_IOERROR="core.EventID.SOCKET_IOERROR",t.SOCKET_CLOSE="core.EventID.SOCKET_CLOSE",t.KEYBOARD_DOWN="core.EventID.KEYBOARD_DOWN",t.KEYBOARD_UP="core.EventID.KEYBOARD_UP",t}();t.EventID=e,__reflect(e.prototype,"core.EventID")}(core||(core={}));var core;!function(t){var e=function(e){function n(){var t=e.call(this,n.NAME)||this;return t._includeNameArr=["JumpingMap","EmployeMain","RecruitMain","PatientPokedexComponent","ShopBox"],t._curNameList=[],t}return __extends(n,e),n.prototype.onRegister=function(){},n.prototype.onRemove=function(){},n.prototype.listNotificationInterests=function(){var n=[];return t.Config.checkSceneVisible&&n.push(t.CoreNotificationDef.UI_ADD,t.CoreNotificationDef.UI_REMOVE),n.concat(e.prototype.listNotificationInterests.call(this))},n.prototype.handleNotification=function(e){var n;switch(e.getName()){case t.CoreNotificationDef.UI_ADD:n=e.getArr()[0],this.check(n,!0);break;case t.CoreNotificationDef.UI_REMOVE:n=e.getArr()[0],this.check(n,!1)}},n.prototype.check=function(e,n){var o=-1!=this._includeNameArr.indexOf(e);if(o){if(n){var r=t.UI.isExistCompByName(e);n=r?!0:!1}if(n)this.sceneVisible(!1),-1==this._curNameList.indexOf(e)&&this._curNameList.push(e);else{var i=this._curNameList.indexOf(e);-1!=i?this._curNameList.splice(i,1):console.log("点击太快发出警告，这个界面'"+e+"'已经被移除啦"),0==this._curNameList.length&&this.sceneVisible(!0)}}},n.prototype.sceneVisible=function(e){var o=t.UI.getScene();o&&(o.visible=e),e?TimerManager.instance.removeTicks(this):TimerManager.instance.addKeyTick(n.CheckTickKey,this.checkVisible,this,100,0)},n.prototype.checkVisible=function(){if(0==this._curNameList.length)return this.sceneVisible(!0),void TimerManager.instance.removeTicks(this);var e=!1,n=[];try{for(var o=__values(this._curNameList),r=o.next();!r.done;r=o.next()){var i=r.value;t.UI.isExistCompByName(i)?e=!0:n.push(i)}}catch(a){p={error:a}}finally{try{r&&!r.done&&(l=o["return"])&&l.call(o)}finally{if(p)throw p.error}}try{for(var s=__values(n),c=s.next();!c.done;c=s.next()){var i=c.value,u=this._curNameList.indexOf(i);-1!=u&&this._curNameList.splice(u,1)}}catch(h){f={error:h}}finally{try{c&&!c.done&&(d=s["return"])&&d.call(s)}finally{if(f)throw f.error}}var p,l,f,d},n.CheckTickKey="CheckSceneVisibleController_check",n.NAME="CheckSceneVisibleMediator",n}(t.Mediator);t.CheckSceneVisibleMediator=e,__reflect(e.prototype,"core.CheckSceneVisibleMediator")}(core||(core={}));var core;!function(t){var e=function(e){function n(){var t=e.call(this,n.NAME)||this;return t._excludeNameArr=["MainScene","JumpingMap"],t._boxRemoveTimeMap=new Map,t}return __extends(n,e),n.prototype.onRegister=function(){t.Config.uiRemoveCheck&&TimerManager.instance.addKeyTick("UI_checkRemoveBox",this.checkBoxRemove,this,t.Config.uiCheckTime,0)},n.prototype.onRemove=function(){},n.prototype.listNotificationInterests=function(){var n=[];return t.Config.uiRemoveCheck&&n.push(t.CoreNotificationDef.UI_REMOVE),n.concat(e.prototype.listNotificationInterests.call(this))},n.prototype.handleNotification=function(e){switch(e.getName()){case t.CoreNotificationDef.UI_REMOVE:this.refreshRemoveTime.apply(this,__spread(e.getArr()))}},n.prototype.addExcludeName=function(t){-1==this._excludeNameArr.indexOf(t)&&this._excludeNameArr.push(t)},n.prototype.checkBoxRemove=function(){try{for(var e=__values(this._boxRemoveTimeMap.keys()),n=e.next();!n.done;n=e.next()){var o=n.value;if(-1==this._excludeNameArr.indexOf(o)){var r=this._boxRemoveTimeMap.get(o),i=(new Date).getTime();if(i-r>=t.Config.uiCleanTime){this._boxRemoveTimeMap["delete"](o);var a=t.UI.getBoxMap();a.has(o)&&!a.get(o).parent&&(a["delete"](o),console.log("移除了UI缓存：",o))}}}}catch(s){c={error:s}}finally{try{n&&!n.done&&(u=e["return"])&&u.call(e)}finally{if(c)throw c.error}}var c,u},n.prototype.refreshRemoveTime=function(e){if(t.UI.isUiCache(e)){var n=(new Date).getTime();this._boxRemoveTimeMap.set(e,n)}},n.NAME="ClearExpireUICacheMediator",n}(t.Mediator);t.ClearExpireUICacheMediator=e,__reflect(e.prototype,"core.ClearExpireUICacheMediator")}(core||(core={}));var core;!function(t){var e=function(e){function n(){var t=e.call(this,n.NAME)||this;return t._queueList=[],t._curBoxName="",t}return __extends(n,e),n.prototype.onRegister=function(){},n.prototype.onRemove=function(){},n.prototype.listNotificationInterests=function(){var o=[t.CoreNotificationDef.UI_NORMAL_REMOVE,t.CoreNotificationDef.UI_CLEAR,n.ADD_QUEUE_BOX];return o.concat(e.prototype.listNotificationInterests.call(this))},n.prototype.handleNotification=function(e){switch(e.getName()){case t.CoreNotificationDef.UI_NORMAL_REMOVE:this.excuteQueue.apply(this,__spread(e.getArr()));break;case t.CoreNotificationDef.UI_CLEAR:this.clear();break;case n.ADD_QUEUE_BOX:this.addQueueBoxByClassName(e.getArr()[0],e.getArr()[1])}},n.prototype.addQueueBoxByClassName=function(e,n){e&&n&&!t.UI.isExistCompByName(e)&&(this.hasName(e)||this._curBoxName==e||(this._queueList.push({clzName:e,callback:n}),console.log("添加进队列：",e)),this._curBoxName&&""!=this._curBoxName||this.openNextBox())},n.prototype.excuteQueue=function(t){this._curBoxName===t&&this.openNextBox()},n.prototype.openNextBox=function(){if(this._queueList.length<=0)return void this.clear();var t=this._queueList.shift(),e=t.callback;this._curBoxName=t.clzName,t.args=t.args?t.args:[],(n=e.callback).call.apply(n,__spread([e.thisObj],t.args)),console.log("打开下一个队列弹窗",t.clzName);var n},n.prototype.hasName=function(t){return this.getQueueInfoByName(t)?!0:!1},n.prototype.getQueueInfoByName=function(t){return this._queueList.find(function(e){return e.clzName==t})},n.prototype.clear=function(){this._queueList=[],this._curBoxName="",console.log("清除所有队列"),t.postNotification(n.END_QUEUE)},n.END_QUEUE="END_QUEUE",n.ADD_QUEUE_BOX="ADD_QUEUE_BOX",n.NAME="QueueBoxMediator",n}(t.Mediator);t.QueueBoxMediator=e,__reflect(e.prototype,"core.QueueBoxMediator")}(core||(core={}));var core;!function(t){var e=function(t){function e(n,o){void 0===n&&(n=null),void 0===o&&(o=null);var r=t.call(this)||this;return r._proxyName=null,r._data=null,r._proxyName=null!=n?n:e.NAME,null!=o&&r.setData(o),r}return __extends(e,t),e.prototype.getProxyName=function(){return this._proxyName},e.prototype.setData=function(t){this._data=t},e.prototype.getData=function(){return this._data},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="Proxy",e}(egret.EventDispatcher);t.Model=e,__reflect(e.prototype,"core.Model",["core.IModel"])}(core||(core={}));var core;!function(t){function e(e){var n=t.display.getComponentName(e),o=Symbol["for"](n);return r.hasOwnProperty(o)||(r[o]=new e),r[o]}function n(t,e){var n=e+t.name,o=Symbol["for"](n);return r.hasOwnProperty(o)||(r[o]=new e),r[o]}function o(){return r}var r={};t.singleton=e,t.typeSingleton=n,t.getAllSingleton=o}(core||(core={}));var core;!function(t){function e(e){t.stage=e,t.stage.addChild(t.UI.instance),egret.ImageLoader.crossOrigin="anonymous",RES.setMaxLoadingThread(8),t.registerMediator(new t.CoreMediator),t.registerMediator(new t.ClearExpireUICacheMediator),t.registerMediator(new t.CheckSceneVisibleMediator),t.hooks.network.register(new t.HttpListenerHook),egret.Capabilities.runtimeType==egret.RuntimeType.WEB
}function n(e,n){if(t.is.truthy(e)){var o=egret.getDefinitionByName(e);if(t.is.truthy(o))return o}return n}function o(e,n){void 0===n&&(n=null);for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var i=t.getDefinitionType(e,n);return t.is.truthy(i)?new(i.bind.apply(i,__spread([void 0],o))):null}function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var o=0;o<e.length;o++)eui.PropertyEvent.dispatchPropertyEvent(t,eui.PropertyEvent.PROPERTY_CHANGE,e[o])}function i(t){return t.constructor!=Object.constructor?!0:!1}function a(t){return t.constructor==Object.constructor?!0:!1}function s(t){var e=[];if(t.group)try{for(var n=__values(t.group),o=n.next();!o.done;o=n.next()){var r=o.value;e.push(RES.loadGroup(r))}}catch(i){d={error:i}}finally{try{o&&!o.done&&(g=n["return"])&&g.call(n)}finally{if(d)throw d.error}}if(t.assets)try{for(var a=__values(t.assets),s=a.next();!s.done;s=a.next()){var c=s.value;e.push(RES.getResAsync(c))}}catch(u){m={error:u}}finally{try{s&&!s.done&&(_=a["return"])&&_.call(a)}finally{if(m)throw m.error}}if(t.promise)try{for(var h=__values(t.promise),p=h.next();!p.done;p=h.next()){var l=p.value;e.push(l)}}catch(f){y={error:f}}finally{try{p&&!p.done&&(v=h["return"])&&v.call(h)}finally{if(y)throw y.error}}return e;var d,g,m,_,y,v}var c=function(){function t(){}return t.httpRequestUrl="",t.httpRequestMethod=egret.HttpMethod.GET,t.requestKey="sc",t.httpTimeout=6e5,t.httpBase64=!1,t.uiCache=!0,t.checkSceneVisible=!0,t.uiRemoveCheck=!0,t.uiCheckTime=2e3,t.uiCleanTime=3e5,t}();t.Config=c,__reflect(c.prototype,"core.Config"),t.run=e,t.getDefinitionType=n,t.getDefinitionInstance=o,t.propertyChange=r,t.isInstance=i,t.isType=a,t.getPreloadList=s}(core||(core={})),window.core=core;var core;!function(t){var e=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this._name=null,this._body=null,this._type=null,this._arrFormat=!1,this._name=t,this._body=e,this._type=n}return t.prototype.getName=function(){return this._name},t.prototype.setBody=function(t){this._body=t},t.prototype.getBody=function(){return this._body},t.prototype.setType=function(t){this._type=t},t.prototype.getType=function(){return this._type},t.prototype.setArrFormat=function(t){this._arrFormat=t},t.prototype.isArrFromat=function(){return this._arrFormat},t.prototype.getArr=function(){return this._body||(this._body=[]),this._body},t.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.getBody()?"null":this.getBody().toString()),t+="\nType:"+(null==this.getType()?"null":this.getType())},t}();t.Notification=e,__reflect(e.prototype,"core.Notification",["core.INotification"])}(core||(core={}));var core;!function(t){var e=function(){function t(t,e,n){void 0===n&&(n=0),this._notifyMethod=null,this._context=null,this._priority=0,this.setNotifyMethod(t),this.setNotifyContext(e),this.setPriority(n)}return t.prototype.getNotifyMethod=function(){return this._notifyMethod},t.prototype.setNotifyMethod=function(t){this._notifyMethod=t},t.prototype.getNotifyContext=function(){return this._context},t.prototype.setNotifyContext=function(t){this._context=t},t.prototype.getPriority=function(){return this._priority},t.prototype.setPriority=function(t){this._priority=t},t.prototype.notifyObserver=function(t){t.isArrFromat()?(e=this.getNotifyMethod()).call.apply(e,__spread([this._context,t],t.getArr())):this.getNotifyMethod().call(this._context,t);var e},t.prototype.compareNotifyContext=function(t){return this._context==t},t}();t.Observer=e,__reflect(e.prototype,"core.Observer",["core.IObserver"])}(core||(core={}));var core;!function(t){var e=function(){function e(){this._requestCount=0}return e.prototype.onRequest=function(e){e.requestInfo.mask&&(0==this._requestCount&&t.showSimpleLoading(),this._requestCount++)},e.prototype.onReponse=function(t){this.removeSimpleLoading(t)},e.prototype.onRequestError=function(t){this.checkReload(t)},e.prototype.onTimeout=function(t){console.warn("请求超时",t.requestInfo)},e.prototype.onReloadError=function(t){console.warn("重试3次失败没救了",t.requestInfo)},e.prototype.onReponseError=function(t){},e.prototype.onReponseSuccess=function(t){},e.prototype.checkReload=function(e){if(0==e.requestInfo.reload)return void this.removeSimpleLoading(e);if(e.reloadTimes>=3)return void t.invokeHook(t.hooks.network,"onReloadError",e);e.reloadTimes+=1,this.removeSimpleLoading(e);var n={title:"重新请求",text:"网络环境不稳定\n请确保网络连接正常，然后重试\n错误码({code})",yes:"重试",type:t.PromptState.confirm,no:""};t.UI.addBox(t.PromptBox,n).then(function(t){t.show().then(function(){e.load()})})},e.prototype.removeSimpleLoading=function(e){if(e.requestInfo.mask){if(0==this._requestCount)return;this._requestCount>0&&this._requestCount--,0==this._requestCount&&t.hideSimpleLoading()}},e}();t.HttpListenerHook=e,__reflect(e.prototype,"core.HttpListenerHook",["core.INetworkHook"])}(core||(core={}));var core;!function(t){function e(e){var n=this;o.formatReqInfo(e);var r=new Promise(function(o,r){var i=new t.NetworkRequest(e);i.addEventListener(t.RequestEvent.RESPONSE_SUCCEED,function(t){o(t.responseData)},n),i.addEventListener(t.RequestEvent.REQUEST_FAIL,function(t){r(t.responseData)},n),i.load()});return r}var n;!function(t){t[t.ERROR_DATA=-1e4]="ERROR_DATA",t[t.TIME_OUT=-10001]="TIME_OUT",t[t.ERROR_REQUEST=-10002]="ERROR_REQUEST",t[t.illegalJson=-20001]="illegalJson",t[t.badRequest=-20002]="badRequest"}(n=t.ProxyErrorCode||(t.ProxyErrorCode={}));var o=function(){function e(){}return e.addGlobalParams=function(t,e){this._globalParams[t]=e},e.getGlobalParam=function(t){return this._globalParams[t]},e.removeGlobalParams=function(t){delete this._globalParams[t]},e.paramsToQueryString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],o=0;o<t.length;o++){var r=t[o];for(var i in r)n.push(i+"="+r[i])}return n.join("&")},e.paramsToObject=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},o=0;o<t.length;o++){var r=t[o];if(r)for(var i in r)n[i]=r[i]}return n},e.formatReqInfo=function(e){return e.hasOwnProperty("requestUrl")||(e.requestUrl=t.Config.httpRequestUrl),e.hasOwnProperty("method")||(e.method=t.Config.httpRequestMethod),e.hasOwnProperty("params")||(e.params={}),e.hasOwnProperty("mask")||(e.mask=!1),e.hasOwnProperty("cache")||(e.cache=!1),e.hasOwnProperty("reload")||(e.reload=!0),e},e.tranObjToArrBuffer=function(t){var e=JSON.stringify(t),n=new egret.ByteArray;n.writeUTFBytes(e);var o=egret.Base64Util.encode(n.buffer);return o},e.tranArrBufferToObj=function(t){var e=egret.Base64Util.decode(t),n=new egret.ByteArray(e);n.position=0;var o=n.readUTFBytes(n.length);return JSON.parse(o)},e.getSign=function(t){var e=JSON.stringify(t)+NetCode.SecretKey;return e=this.md5(e)},e.md5=function(e){var n=new t.md5;return n.hex_md5(e)},e.generateUUID=function(){for(var t=[],e="0123456789yiyuan",n=0;36>n;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var o=t.join("");return o},e._globalParams={},e}();t.network=o,__reflect(o.prototype,"core.network"),t.request=e}(core||(core={}));var core;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n._isTimeout=!1,n._timeoutId=null,n.reloadTimes=0,n._errorMessage="",n._isResponseSucceed=!1,n._isRequestSucceed=!1,n._customParams={},n._requestInfo=t,n}return __extends(n,e),n.prototype.load=function(){var e=this,n=this._requestInfo.requestUrl;if(this._request=new egret.HttpRequest,this._request.responseType=egret.HttpResponseType.TEXT,this._request.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),this._request.addEventListener(egret.Event.COMPLETE,this.onComplete,this),this._request.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._request.addEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this),egret.clearTimeout(this._timeoutId),this._timeoutId=egret.setTimeout(function(){e._isTimeout=!0,e._errorCode=t.ProxyErrorCode.TIME_OUT,e._errorMessage="请求超时",e.clearEventListener(),e.dispatchEvent(new t.RequestEvent(t.RequestEvent.TIME_OUT,e)),t.postNotification(t.RequestNotice.TIME_OUT,e),t.invokeHook(t.hooks.network,"onTimeout",e)},this,t.Config.httpTimeout),t.invokeHook(t.hooks.network,"onRequest",this),t.Config.httpBase64){var o=t.network.paramsToObject(this._requestInfo.params,this._customParams,t.network._globalParams);if(this._requestInfo.method==egret.HttpMethod.GET)n=n+"?data="+encodeURIComponent(t.network.tranObjToArrBuffer(o)),this._request.open(n,egret.HttpMethod.GET),this._request.send();else{this._request.open(n,egret.HttpMethod.POST);var r="data="+encodeURIComponent(JSON.stringify(o));this._request.send(r)}}else{var i=t.network.paramsToQueryString(this._requestInfo.params,this._customParams,t.network._globalParams);if(this._requestInfo.method==egret.HttpMethod.GET){var a=-1==n.indexOf("?")?n+"?":n;"?"!=a[a.length-1]&&"&"!=a[a.length-1]&&(a+="&"),a+=i,this._request.open(a,egret.HttpMethod.GET),this._request.send()}else this._request.open(n,egret.HttpMethod.POST),this._request.send(i)}},n.prototype.onComplete=function(t){var e=null;try{e=JSON.parse(t.target.response)}catch(n){throw new Error(n)}this.onResponse(e),this.clearEventListener()},n.prototype.onResponse=function(e){this._responseData=e,this._isResponseSucceed=!1,this._responseData&&this._responseData.hasOwnProperty(t.Config.requestKey)&&(this._isResponseSucceed=0==this._responseData[t.Config.requestKey]),this._errorCode=this._responseData?this._responseData[t.Config.requestKey]:t.ProxyErrorCode.ERROR_DATA,this._isRequestSucceed=!0,this._isResponseSucceed?(this.dispatchEvent(new t.RequestEvent(t.RequestEvent.RESPONSE_SUCCEED,this)),t.postNotification(t.RequestNotice.RESPONSE_SUCCEED,e,this),t.invokeHook(t.hooks.network,"onResponseSuccess",this)):(this.dispatchEvent(new t.RequestEvent(t.RequestEvent.RESPONSE_ERROR,this)),t.postNotification(t.RequestNotice.RESPONSE_ERROR,e,this),t.invokeHook(t.hooks.network,"onResponseError",this)),t.invokeHook(t.hooks.network,"onReponse",this)},n.prototype.onError=function(e){console.log("request error : "+e),this._isRequestSucceed=!1,this._errorMessage="请求失败",this._errorCode=t.ProxyErrorCode.ERROR_REQUEST,this.clearEventListener(),this.dispatchEvent(new t.RequestEvent(t.RequestEvent.REQUEST_FAIL,this)),t.postNotification(t.RequestNotice.REQUEST_FAIL,this),t.invokeHook(t.hooks.network,"onRequestError",this)},n.prototype.onProgress=function(t){},n.prototype.clearEventListener=function(){egret.clearTimeout(this._timeoutId),this._request.removeEventListener(egret.Event.COMPLETE,this.onComplete,this),this._request.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onError,this),this._request.removeEventListener(egret.ProgressEvent.PROGRESS,this.onProgress,this),this._request.abort()},Object.defineProperty(n.prototype,"needReload",{get:function(){return this._requestInfo.reload},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isTimeout",{get:function(){return this._isTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestInfo",{get:function(){return this._requestInfo},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"responseData",{get:function(){return this._responseData},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isResponseSucceed",{get:function(){return this._isResponseSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isRequestSucceed",{get:function(){return this._isRequestSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorMessage",{get:function(){return this._errorMessage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),n.prototype.addParam=function(t,e){this._customParams[t]=e},n.prototype.getParamByName=function(t){return this._requestInfo?this._requestInfo[t]:null},n.prototype.hasParamByName=function(t){return this._requestInfo?this._requestInfo.hasOwnProperty(t):!1},n}(egret.EventDispatcher);t.NetworkRequest=e,__reflect(e.prototype,"core.NetworkRequest")}(core||(core={}));var core;!function(t){var e=function(t){function e(e,n,o,r){var i=t.call(this,e,o,r)||this;return i._target=n,i}return __extends(e,t),Object.defineProperty(e.prototype,"responseData",{get:function(){return this._target.responseData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this._target.errorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return this._target.errorMessage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isResponseSucceed",{get:function(){return this._target.isResponseSucceed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRequestSucceed",{get:function(){return this._target.isRequestSucceed},enumerable:!0,configurable:!0}),e.REQUEST_FAIL="fail",e.RESPONSE_SUCCEED="respnseSucceed",e.RESPONSE_ERROR="error",e.TIME_OUT="timeout",e}(egret.Event);t.RequestEvent=e,__reflect(e.prototype,"core.RequestEvent")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.REQUEST_FAIL="net_request_fail",t.RESPONSE_SUCCEED="net_response_succeed",t.RESPONSE_ERROR="net_response_error",t.TIME_OUT="net_timeout",t}();t.RequestNotice=e,__reflect(e.prototype,"core.RequestNotice")}(core||(core={}));var core;!function(t){function e(){return t.singleton(o).serverTime}function n(e){t.singleton(o).serverTime=e}var o=function(){function t(){}return Object.defineProperty(t.prototype,"serverTime",{get:function(){var t=(new Date).getTime();return this._serverTime?1e3*this._serverTime+t-this._clientTime:t},set:function(t){this._serverTime||TimerManager.instance.addKeyTick("AsyncServerTime",this.requestSeverTime,this,3e4,0),this._serverTime=t,this._clientTime=(new Date).getTime()},enumerable:!0,configurable:!0}),t.prototype.requestSeverTime=function(){},t}();t.AsyncServerTime=o,__reflect(o.prototype,"core.AsyncServerTime"),t.getServerTime=e,t.setServerTime=n}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.initEncodeChar=function(){for(var t=new Array(64),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=e.length;o>n;n++)t[n]=e.charCodeAt(n);return t},t.initDecodeChar=function(){var t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];return t},t.encode=function(e){var n=new egret.ByteArray,o=0,r=e.length,i=r%3,a=r-i,s=0;for(e.position=0;a>o;)s=(255&e.readByte())<<16|(255&e.readByte())<<8|255&e.readByte(),n.writeByte(t.s_encodeChars[s>>>18]),n.writeByte(t.s_encodeChars[s>>>12&63]),n.writeByte(t.s_encodeChars[s>>>6&63]),n.writeByte(t.s_encodeChars[63&s]),o+=3;return 1==i?(s=255&e.readByte(),n.writeByte(t.s_encodeChars[s>>>2]),n.writeByte(t.s_encodeChars[3&s]),n.writeByte(61),n.writeByte(61)):2==i&&(s=(255&e.readByte())<<8|255&e.readByte(),n.writeByte(t.s_encodeChars[s>>>10]),n.writeByte(t.s_encodeChars[s>>>4&63]),n.writeByte(t.s_encodeChars[(15&s)<<2]),n.writeByte(61)),o+=i,n.position=0,n.readUTFBytes(n.length)},t.decode=function(e){var n=new egret.ByteArray,o=new egret.ByteArray;o.writeUTFBytes(e),o.position=0;for(var r,i,a,s,c=0,u=o.length;u>c&&(r=t.s_decodeChars[255&o.readByte()],-1!=r)&&(i=t.s_decodeChars[255&o.readByte()],-1!=i)&&(n.writeByte(r<<2|3&i),a=255&o.readByte(),61!=a)&&(a=t.s_decodeChars[a],-1!=a)&&(n.writeByte(240&i|15&a),s=255&o.readByte(),61!=s)&&(s=t.s_decodeChars[s],-1!=s);)n.writeByte(192&a|s),c+=4;return n.position=0,n},t.encodeStr=function(e){if(null!=e&&""!=e){var n=new egret.ByteArray;return n.writeUTFBytes(e),t.encode(n)}return""},t.decodeStr=function(e){if(null!=e&&""!=e){var n=t.decode(e);return n.readUTFBytes(n.length)}return""},t.s_encodeChars=t.initEncodeChar(),t.s_decodeChars=t.initDecodeChar(),t}();t.Base64=e,__reflect(e.prototype,"core.Base64")}(core||(core={}));var core;!function(t){var e=function(){function e(){}return e.setAnchor=function(t,e,n){void 0===n&&(n=e),t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*n},e.addFliterGray=function(t){if(t&&!t.filters){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(e);t.filters=[n]}},e.removeFliterGray=function(t){t&&t.filters&&(t.filters=null)},e.getChildByName=function(t,e){for(var n=e.numChildren,o=0;n>o;o++){var r=e.getChildAt(o);if(r instanceof egret.DisplayObjectContainer)return r.name==t?r:this.getChildByName(t,r);if(r.name==t)return r}return null},e.removeAllChildren=function(t){for(;t.numChildren>0;)t.removeChildAt(0)},e.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},e.setFullDisplay=function(e){e.width=t.stage.stageWidth,e.height=t.stage.stageHeight},e.destoryChildren=function(e){for(var n=e.numChildren,o=0;n>o;o++){var r=e.getChildAt(o);r instanceof t.BaseComponent?r.destoryData():r instanceof t.Button?r.destoryData():r instanceof eui.Group?this.destoryChildren(r):r instanceof eui.Scroller?this.destoryChildren(r):r instanceof t.ItemRenderer&&r.destoryData()}},e.getHostComponent=function(t){var e=t.parent;if(this.isHostComponentType(e))return e;for(;e&&!this.isHostComponentType(e);)e=e.parent;return this.isHostComponentType(e)?e:null},e.isHostComponentType=function(e){return e instanceof t.BaseComponent||e instanceof t.ItemRenderer},e.getComponentName=function(e){var n="";return n=t.isType(e)?e.prototype[t.UI.NameKey]:e[t.UI.NameKey]},e}();t.display=e,__reflect(e.prototype,"core.display")}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.throttle=function(t,e,n,o){void 0===n&&(n=!1);var r,i,a,s=+new Date,c=0,u=0,h=null,p=function(){u=s,t.apply(i,a)};return function(){s=+new Date,i=this,a=arguments,r=s-(o?c:u)-e,clearTimeout(h),o?n?h=setTimeout(p,this,e):r>=0&&p():r>=0?p():n&&(h=setTimeout(p,this,-r)),c=s}},t}();t.fun=e,__reflect(e.prototype,"core.fun")}(core||(core={}));var core;!function(t){function e(t){return t.hasOwnProperty(r)||(t[r]=o++),t[r]}function n(e){return t.is.truthy(e)&&e.hasOwnProperty(r)}var o=1,r="__meru_type_id__";t.getTypeId=e,t.hasTypeId=n}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t.truthy=function(t){return this.existy(t)&&t!==!1&&!this.nan(t)&&""!==t&&0!==t},t.falsy=function(t){return!this.truthy(t)},t.existy=function(t){return null!==t&&void 0!==t},t.undefined=function(t){return void 0===t},t.nan=function(t){return t!==t},t.nul=function(t){return null===t},t.number=function(e){return!this.nan(e)&&"[object Number]"===t.toString.call(e)},t.object=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},t.fun=function(e){return"[object Function]"===t.toString.call(e)||"function"==typeof e},t.array=function(e){return Array.isArray(e)||"[object Array]"===t.toString.call(e)},t.bool=function(e){return e===!0||e===!1||"[object Boolean]"===t.toString.call(e)},t.date=function(e){return"[object Date]"===t.toString.call(e)},t.regexp=function(e){return"[object RegExp]"===t.toString.call(e)},t.string=function(e){return"[object String]"===t.toString.call(e)},t["char"]=function(t){return this.string(t)&&1===t.length},t.even=function(t){return this.number(t)&&t%2===0},t.odd=function(t){return this.number(t)&&t%2===1},t.decimal=function(t){return this.number(t)&&t%1!==0},t.integer=function(t){return this.number(t)&&t%1===0},t.userAgent="navigator"in window&&"userAgent"in navigator&&navigator.userAgent.toLowerCase()||"",t.toString=Object.prototype.toString,t.ios=function(){return t.iphone()||t.ipad()||t.ipod()},t.iphone=function(){return/iphone/i.test(t.userAgent)},t.ipad=function(){return/ipad/i.test(t.userAgent)},t.ipod=function(){return/ipod/i.test(t.userAgent)},t}();t.is=e,__reflect(e.prototype,"core.is")}(core||(core={}));var core;!function(t){var e=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var o=Array(16),r=Array(16),i=0;16>i;i++)o[i]=909522486^n[i],r[i]=1549556828^n[i];var a=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<t.length;i++)n=t.charCodeAt(i),r+=o.charAt(n>>>4&15)+o.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",r=t.length,i=0;r>i;i+=3)for(var a=t.charCodeAt(i)<<16|(r>i+1?t.charCodeAt(i+1)<<8:0)|(r>i+2?t.charCodeAt(i+2):0),s=0;4>s;s++)o+=8*i+6*s>8*t.length?this.b64pad:n.charAt(a>>>6*(3-s)&63);return o},t.prototype.rstr2any=function(t,e){var n,o,r,i,a,s=e.length,c=Array(Math.ceil(t.length/2));for(n=0;n<c.length;n++)c[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var u=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),h=Array(u);for(o=0;u>o;o++){for(a=Array(),i=0,n=0;n<c.length;n++)i=(i<<16)+c[n],r=Math.floor(i/s),i-=r*s,(a.length>0||r>0)&&(a[a.length]=r);h[o]=i,c=a}var p="";for(n=h.length-1;n>=0;n--)p+=e.charAt(h[n]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,n,o="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,c=o,u=r,h=i;n=this.md5_ff(n,o,r,i,t[a+0],7,-680876936),i=this.md5_ff(i,n,o,r,t[a+1],12,-389564586),r=this.md5_ff(r,i,n,o,t[a+2],17,606105819),o=this.md5_ff(o,r,i,n,t[a+3],22,-1044525330),n=this.md5_ff(n,o,r,i,t[a+4],7,-176418897),i=this.md5_ff(i,n,o,r,t[a+5],12,1200080426),r=this.md5_ff(r,i,n,o,t[a+6],17,-1473231341),o=this.md5_ff(o,r,i,n,t[a+7],22,-45705983),n=this.md5_ff(n,o,r,i,t[a+8],7,1770035416),i=this.md5_ff(i,n,o,r,t[a+9],12,-1958414417),r=this.md5_ff(r,i,n,o,t[a+10],17,-42063),o=this.md5_ff(o,r,i,n,t[a+11],22,-1990404162),n=this.md5_ff(n,o,r,i,t[a+12],7,1804603682),i=this.md5_ff(i,n,o,r,t[a+13],12,-40341101),r=this.md5_ff(r,i,n,o,t[a+14],17,-1502002290),o=this.md5_ff(o,r,i,n,t[a+15],22,1236535329),n=this.md5_gg(n,o,r,i,t[a+1],5,-165796510),i=this.md5_gg(i,n,o,r,t[a+6],9,-1069501632),r=this.md5_gg(r,i,n,o,t[a+11],14,643717713),o=this.md5_gg(o,r,i,n,t[a+0],20,-373897302),n=this.md5_gg(n,o,r,i,t[a+5],5,-701558691),i=this.md5_gg(i,n,o,r,t[a+10],9,38016083),r=this.md5_gg(r,i,n,o,t[a+15],14,-660478335),o=this.md5_gg(o,r,i,n,t[a+4],20,-405537848),n=this.md5_gg(n,o,r,i,t[a+9],5,568446438),i=this.md5_gg(i,n,o,r,t[a+14],9,-1019803690),r=this.md5_gg(r,i,n,o,t[a+3],14,-187363961),o=this.md5_gg(o,r,i,n,t[a+8],20,1163531501),n=this.md5_gg(n,o,r,i,t[a+13],5,-1444681467),i=this.md5_gg(i,n,o,r,t[a+2],9,-51403784),r=this.md5_gg(r,i,n,o,t[a+7],14,1735328473),o=this.md5_gg(o,r,i,n,t[a+12],20,-1926607734),n=this.md5_hh(n,o,r,i,t[a+5],4,-378558),i=this.md5_hh(i,n,o,r,t[a+8],11,-2022574463),r=this.md5_hh(r,i,n,o,t[a+11],16,1839030562),o=this.md5_hh(o,r,i,n,t[a+14],23,-35309556),n=this.md5_hh(n,o,r,i,t[a+1],4,-1530992060),i=this.md5_hh(i,n,o,r,t[a+4],11,1272893353),r=this.md5_hh(r,i,n,o,t[a+7],16,-155497632),o=this.md5_hh(o,r,i,n,t[a+10],23,-1094730640),n=this.md5_hh(n,o,r,i,t[a+13],4,681279174),i=this.md5_hh(i,n,o,r,t[a+0],11,-358537222),r=this.md5_hh(r,i,n,o,t[a+3],16,-722521979),o=this.md5_hh(o,r,i,n,t[a+6],23,76029189),n=this.md5_hh(n,o,r,i,t[a+9],4,-640364487),i=this.md5_hh(i,n,o,r,t[a+12],11,-421815835),r=this.md5_hh(r,i,n,o,t[a+15],16,530742520),o=this.md5_hh(o,r,i,n,t[a+2],23,-995338651),n=this.md5_ii(n,o,r,i,t[a+0],6,-198630844),i=this.md5_ii(i,n,o,r,t[a+7],10,1126891415),r=this.md5_ii(r,i,n,o,t[a+14],15,-1416354905),o=this.md5_ii(o,r,i,n,t[a+5],21,-57434055),n=this.md5_ii(n,o,r,i,t[a+12],6,1700485571),i=this.md5_ii(i,n,o,r,t[a+3],10,-1894986606),r=this.md5_ii(r,i,n,o,t[a+10],15,-1051523),o=this.md5_ii(o,r,i,n,t[a+1],21,-2054922799),n=this.md5_ii(n,o,r,i,t[a+8],6,1873313359),i=this.md5_ii(i,n,o,r,t[a+15],10,-30611744),r=this.md5_ii(r,i,n,o,t[a+6],15,-1560198380),o=this.md5_ii(o,r,i,n,t[a+13],21,1309151649),n=this.md5_ii(n,o,r,i,t[a+4],6,-145523070),i=this.md5_ii(i,n,o,r,t[a+11],10,-1120210379),r=this.md5_ii(r,i,n,o,t[a+2],15,718787259),o=this.md5_ii(o,r,i,n,t[a+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,c),r=this.safe_add(r,u),i=this.safe_add(i,h)}return[n,o,r,i]},t.prototype.md5_cmn=function(t,e,n,o,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),r),n)},t.prototype.md5_ff=function(t,e,n,o,r,i,a){return this.md5_cmn(e&n|~e&o,t,e,r,i,a)},t.prototype.md5_gg=function(t,e,n,o,r,i,a){return this.md5_cmn(e&o|n&~o,t,e,r,i,a)},t.prototype.md5_hh=function(t,e,n,o,r,i,a){return this.md5_cmn(e^n^o,t,e,r,i,a)},t.prototype.md5_ii=function(t,e,n,o,r,i,a){return this.md5_cmn(n^(e|~o),t,e,r,i,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(n>>16);return o<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();t.md5=e,__reflect(e.prototype,"core.md5")}(core||(core={}));var core;!function(t){var e=function(){function e(){}return e.deepClone=function(t){if(!t&&"object"!=typeof t)return null;var e=Array.isArray(t)?[]:{};for(var n in t)t[n]&&(t[n]&&"object"==typeof t[n]?(e[n]=Array.isArray(t[n])?[]:{},e[n]=this.deepClone(t[n])):e[n]=t[n]);return e},e.deepClone2=function(t){return JSON.parse(JSON.stringify(t))},e.deepCloneCommon=function(t){var e;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){e=[];for(var n=0,o=t.length;o>n;n++)e[n]=this.deepCloneCommon(t[n]);return e}if(t instanceof Object){e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=this.deepCloneCommon(t[r]));return e}throw new Error("Unable to copy values! Its type isn't supported.")},e.simpleClone=function(t){if("object"!=typeof t)return null;var e=Array.isArray(t)?[]:{};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},e.getValue=function(e,n,o){if(void 0===o&&(o=null),t.is.falsy(e))return o;n+="";for(var r=n.split("."),i=e,a=0;a<r.length;a++){var n=r[a];if(i=t.is.array(i)?i[parseInt(n)]:""==n?i:i[n],!t.is.existy(i))break}return t.is.existy(i)?i:o},e.hasValue=function(t,e){if(!t)return!1;e+="";for(var n=e.split("."),o=t;n.length>0&&o;){var r=n.shift();if(!o.hasOwnProperty(r))return!1;o=o[r]}return!0},e}();t.obj=e,__reflect(e.prototype,"core.obj")}(core||(core={}));var core;!function(t){var e=function(){function e(t){this._leftArr=[],this._useArr=[],this._type=t}return e.prototype.push=function(e){var n=this._useArr.indexOf(e);if(-1!=n){var o=this._useArr[n];t.is.fun(o.dispose)&&o.dispose(),this._useArr.splice(n,1)}-1==this._leftArr.indexOf(e)&&this._leftArr.push(e)},e.prototype.pop=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(0==this._leftArr.length){var o=new this._type;this._leftArr.push(o)}var r=this._leftArr.shift();return t.is.fun(r.init)&&r.init.apply(r,__spread(e)),this._useArr.push(r),r},e}();t.ObjectPool=e,__reflect(e.prototype,"core.ObjectPool");var n=function(){function t(){}return t.getPool=function(t){var n=t.name,o=Symbol["for"](n);return this._poolMap.has(o)||this._poolMap.set(o,new e(t)),this._poolMap.get(o)},t.getTypePool=function(t,n){var o=n+t.name,r=Symbol["for"](o);return this._poolMap.has(r)||this._poolMap.set(r,new e(t)),this._poolMap.get(r)},t._poolMap=new Map,t}();t.pool=n,__reflect(n.prototype,"core.pool")}(core||(core={}));var core;!function(t){var e=function(){function e(){}return e.replaceFromObject=function(n,o){if(t.is.object(o))for(var r in o)n=e.replaceAll(n,"\\{"+r+"\\}",o[r]);return n},e.replaceAll=function(t,e,n){var o=t.replace(new RegExp(e,"g"),n);return o},e.replaceFromArr=function(n){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];if(t.is.array(o))for(var i in o)n=e.replaceAll(n,"\\{"+i+"\\}",o[parseInt(i)].toString());return n},e}();__reflect(e.prototype,"str")}(core||(core={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function o(o){e.call(n,o,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?o(r):RES.getResAsync(t,o,this)}else RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var core;!function(t){var e=function(e){function n(){var o=e.call(this)||this;return o.direction=n.ROW,o.setPoint=function(){switch(this.direction){case n.ROW:this.point=[[-t.stage.stageWidth,0],[0,0]];break;case n.ROW_REVERSE:this.point=[[-t.stage.stageWidth,0],[0,0]];break;case n.COLUMN:this.point=[[0,-t.stage.stageHeight],[0,0]];break;case n.COLUMN_REVERSE:this.point=[[0,-t.stage.stageHeight],[0,0]]}},o}return __extends(n,e),n.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.visible=!1,this.setPoint(),this.open()},n.prototype.open=function(){this.visible=!0,this.move(0)},n.prototype.onClose=function(){e.prototype.onClose.call(this),this.move(1),AudioManager.playerSoundMusic("close_mp3")},n.prototype.move=function(t){void 0===t&&(t=0);var e=this.getChildByName("boxContainer");e?(e.x=this.point[t][0],e.y=this.point[t][1],egret.Tween.get(e).to({x:this.point[1-t][0],y:this.point[1-t][1]},150).call(function(){egret.Tween.removeTweens(e),this.visible=0==t},this)):console.log("BaseFlexComponent伸缩组件不正确")},n.ROW="row",n.COLUMN="column",n.ROW_REVERSE="row_reverse",n.COLUMN_REVERSE="column_reverse",n}(t.BaseComponent);t.BaseFlexComponent=e,__reflect(e.prototype,"core.BaseFlexComponent"),window.BaseFlexComponent=e
}(core||(core={}));var core;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t._notice="",t._throttleTime=0,t._sound=!0,t._isShow=!1,t}return __extends(n,e),Object.defineProperty(n.prototype,"notice",{get:function(){return this._notice},set:function(t){this._notice=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throttleTime",{get:function(){return 0==this._throttleTime?n.THROTTLE_TIME:this._throttleTime<0?0:this._throttleTime},set:function(t){this._throttleTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throttleFun",{get:function(){return null==this._throttleFun&&(this._throttleFun=t.fun.throttle(this.posNotification,this.throttleTime)),this._throttleFun},enumerable:!0,configurable:!0}),n.prototype.buttonReleased=function(){t.is.truthy(this.sound)&&"btnClose"!=this.name&&AudioManager.playerSoundMusic("button_mp3"),this.throttleTime>0?this.throttleFun():this.posNotification()},n.prototype.posNotification=function(){if(t.is.truthy(this._notice)){var e=this.data;if(!e){var n=t.display.getHostComponent(this);n&&(e=n.data)}t.postNotification(this._notice,e,n,this)}t.invokeHook(t.hooks.button,"onClick",this)},Object.defineProperty(n.prototype,"sound",{get:function(){return this._sound},set:function(t){this._sound=t},enumerable:!0,configurable:!0}),n.prototype.showAnim=function(){this._isShow||(this._isShow=!0,egret.Tween.get(this,{loop:!0}).to({scaleX:1.1,scaleY:1.1},1e3).to({scaleX:1,scaleY:1},1e3))},n.prototype.removeAnim=function(){egret.Tween.removeTweens(this),this._isShow=!1,this.scaleX=this.scaleY=1},n.prototype.destoryData=function(){this.data=null,this._throttleFun=null,this.removeAnim()},n.THROTTLE_TIME=100,n}(eui.Button);t.Button=e,__reflect(e.prototype,"core.Button"),window.Button=e}(core||(core={}));var core;!function(t){var e=function(){function e(t){this._args=[],this._listeners=[],this._isFull=!1,this._component=t,this.initEventListener()}return e.prototype.initEventListener=function(){this._component.hasEventListener(egret.Event.ADDED_TO_STAGE)||this._component.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this._component.hasEventListener(egret.Event.REMOVED_FROM_STAGE)||this._component.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this.onInitChildrenEventListener(this)},e.prototype.onInitChildrenEventListener=function(e){for(var n=e.numChildren,o=0;n>o;o++){var r=e.getChildAt(o);r instanceof t.BaseComponent?r.initEventListener():r instanceof t.ItemRenderer?this.onInitChildrenEventListener(r):r instanceof eui.ItemRenderer?this.onInitChildrenEventListener(r):r instanceof t.Button?this.onInitChildrenEventListener(r):r instanceof eui.Group?this.onInitChildrenEventListener(r):r instanceof eui.Scroller&&this.onInitChildrenEventListener(r)}},e.prototype.onAddToStage=function(e){this._component.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),(n=this._component).onEnter.apply(n,__spread(this._args)),t.invokeHook(t.hooks.ui,"onAdd",this._component);var n},e.prototype.onRemovedFromStage=function(){this._component.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemovedFromStage,this),this._isFull&&t.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),this.clearLiteners(),this._component.onExit(),t.invokeHook(t.hooks.ui,"onRemove",this._component)},e.prototype.listener=function(t,e,n,o){if(t&&n&&!t.hasEventListener(e)){var r={component:t,type:e,context:o,callback:n};this._listeners.push(r),t.addEventListener(e,n,o)}},e.prototype.clearLiteners=function(){for(;this._listeners.length>0;){var t=this._listeners.shift();t.component.removeEventListener(t.type,t.callback,t.context)}this._listeners=[]},e.prototype.dispose=function(){this.clearLiteners(),this._args=[],this._isFull=!1,this._component=null},e.prototype.getArgs=function(){return this._args?this._args:[]},e.prototype.setArgs=function(t){this._args=t},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._isFull},enumerable:!0,configurable:!0}),e.prototype.setFull=function(){this._isFull=!0,this.full()},e.prototype.full=function(){return this._component.width=t.stage.stageWidth,this._component.height=t.stage.stageHeight,t.stage.removeEventListener(egret.Event.RESIZE,this.onResize,this),t.stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this},e.prototype.onResize=function(){this._component.width=t.stage.stageWidth,this._component.height=t.stage.stageHeight},e.prototype.isType=function(t){return this._type==t},e.prototype.setUiType=function(t){this._type=t},e.prototype.getUiType=function(){return this._type},e}();t.ComponentState=e,__reflect(e.prototype,"core.ComponentState")}(core||(core={}));var core;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n._componentState=new t.ComponentState(n),n}return __extends(n,e),n.prototype.listener=function(t,e,n,o){this._componentState.listener(t,e,n,o)},n.prototype.setData=function(t){this.data=t,this.dataChanged()},n.prototype.dataChanged=function(){e.prototype.dataChanged.call(this)},Object.defineProperty(n.prototype,"notice",{get:function(){return this._notice},set:function(t){this._notice=t},enumerable:!0,configurable:!0}),n.prototype.getCurrentState=function(){if(0==this.enabled&&this.skin.hasState("disabled"))return"disabled";var t=this.skin.currentState,n=e.prototype.getCurrentState.call(this);return this.skin.hasState(n)?n:t},n.prototype.tap=function(e){return e.target instanceof eui.Button||e.target instanceof t.Button?void e.stopPropagation():void(t.is.truthy(this._notice)&&t.sendNotification(this._notice,this.data,this))},n.prototype.onEnter=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},n.prototype.onExit=function(){this._componentState.clearLiteners(),this.data=null,this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.tap,this)},n.prototype.destoryData=function(){},n}(eui.ItemRenderer);t.ItemRenderer=e,__reflect(e.prototype,"core.ItemRenderer",["core.IComponent","egret.DisplayObject"]),window.ItemRenderer=e}(core||(core={}));var core;!function(t){var e;!function(t){t[t.common=1]="common",t[t.confirm=2]="confirm"}(e=t.PromptState||(t.PromptState={}));var n=function(n){function o(){var t=n.call(this)||this;return t.name="PromptBox",t.skinName="PromptBoxSkin",t}return __extends(o,n),o.prototype.onEnter=function(o){n.prototype.onEnter.call(this),this._info=o,this.btnYes.label=this._info.yes,this.btnNo.label=this._info.no,this.lbTitle.text=this._info.title,this.lbContent.text=this._info.text,this._info.type||(this._info.type=t.PromptState.confirm),this.currentState=this._info.type==e.confirm?"confirm":"common",this.listener(this.btnYes,egret.TouchEvent.TOUCH_TAP,this.onYes,this),this.listener(this.btnNo,egret.TouchEvent.TOUCH_TAP,this.onNo,this)},o.prototype.onYes=function(){this._resolve&&(this._resolve(!0),this._resolve=null),this.onClose()},o.prototype.onNo=function(){this._resolve&&(this._resolve(!1),this._resolve=null),this.onClose()},o.prototype.onExit=function(){this._info=null,n.prototype.onExit.call(this)},o.prototype.show=function(){var t=this;return new Promise(function(e,n){t._resolve=e})},o}(t.BaseComponent);t.PromptBox=n,__reflect(n.prototype,"core.PromptBox"),window.PromptBox=n}(core||(core={}));var core;!function(t){function e(){return a||(a=new i,a=t.UI.addTooltipSync(a)),a}function n(){var t=e();t.show()}function o(){var t=e();0!=t.getShowCount()&&t.hide()}function r(){var t=e();t.forceHide()}var i=function(t){function e(){var e=t.call(this)||this;return e._showCount=0,e.skinName="SimpleLoadingSkin",e}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e.prototype.show=function(){0==this._showCount&&(this.visible=!0,this.runAnimation(function(){})),this._showCount++},e.prototype.hide=function(){var t=this;this._showCount--,0==this._showCount&&this.stopAnimation(function(){t.visible=!1})},e.prototype.forceHide=function(){var t=this;this._showCount=0,this.stopAnimation(function(){t.visible=!1})},e.prototype.getShowCount=function(){return this._showCount},e.prototype.runAnimation=function(t){var e=this.getChildView("mask"),n=this.getChildView("loadingShape");e&&(egret.Tween.removeTweens(e),e.alpha=0,egret.Tween.get(e).to({alpha:1},200).call(t)),n&&(egret.Tween.removeTweens(n),n.alpha=0,n.rotation=0,egret.Tween.get(n).to({alpha:1},100).call(function(){egret.Tween.get(n,{loop:!0}).to({rotation:360},1e3)}))},e.prototype.stopAnimation=function(t){var e=this.getChildView("maskRect"),n=this.getChildView("loadingShape");e&&egret.Tween.get(e).to({alpha:0},100).call(function(){egret.Tween.removeTweens(e)}),n&&egret.Tween.get(n).to({alpha:0},100).call(function(){egret.Tween.removeTweens(n),t&&t()})},e}(t.BaseComponent);t.SimpleLoading=i,__reflect(i.prototype,"core.SimpleLoading"),window.SimpleLoading=i;var a;t.showSimpleLoading=n,t.hideSimpleLoading=o,t.forceHideSimpleLoading=r}(core||(core={}));var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.inLoad=!1,e.countGroupError=0,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.preloadView=new PreLoadView,egret.TextField.default_fontFamily="Microsoft YaHei",egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){window.platform.pauseBgMusic()},egret.lifecycle.onResume=function(){window.platform.resumeBgMusic()},GameVo.pageQueue=platform.getLaunchOptionsSync();var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadErr,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onResourceLoadErr,this);var o=egret.MainContext.instance.stage;if(PlatformUtil.isWxPlatform()?(window.wxOnshow=this.onActivate,window.wxOnHide=this.onDeactivate,window.platform.wxCatchError(function(t,n){e.pushError(t+"--"+n)})):(o.addEventListener(egret.Event.ACTIVATE,this.onActivate,this),o.addEventListener(egret.Event.DEACTIVATE,this.onDeactivate,this)),this.stage.addChild(this.preloadView),e.needZip&&RES.processor.map("json",new JSONProcessor),PlatformUtil.isWxPlatform()){var r=platform.getSystemInfoSync();console.log("微信系统信息：",r),GameVo.isIos=-1==r.system.indexOf("iOS")?!1:!0}else GameVo.isIos=is.ios();this.runGame()["catch"](function(t){console.log(t)})},e.prototype.onActivate=function(){console.log("app 进入前台");var t=(new Date).getTime();t-this._activeTime;GameVo.IsActive=!0,GameVo.httpEnable=!0,egret.ticker.resume(),GameShare.onShareBack()},e.prototype.onDeactivate=function(){console.log("app 进入后台"),this._activeTime=(new Date).getTime(),GameVo.IsActive=!1,GameVo.httpEnable=!1,egret.ticker.pause()},e.prototype.onResourceLoadErr=function(t){console.log(t.groupName,"event.groupName"),++this.countGroupError<3?RES.loadGroup(t.groupName):(this.inLoad=!1,this.preloadView.updatetip("加载资源失败,请 <font size=24 color=0xffa800 stroke=1 strokeColor=0xffa800>点我刷新</font>",this.loadscene.bind(this)))},e.prototype.onResourceLoadComplete=function(t){},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return console.log("当前版本信息 --  assetVer:"+GameVo.assetVersion+", resourceVer:"+GameVo.resourceVersion+" configVer:"+GameVo.configVersion),egret.ImageLoader.crossOrigin="anonymous",ConfigCenter.LANGUAGE_TYPE=LanguageType.zh,[4,RES.loadConfig("default.res.json","resource/")];case 1:return t.sent(),e.needZip?[4,this.loadZip()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.loadscene()];case 4:return t.sent(),[2]}})})},e.prototype.loadZip=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(e){return[2,new Promise(function(e){var n=RES.config.config.fileSystem,o=n.fsData.config_zip;RES.getResByUrl(o.root+o.url,function(t){ConfigCenter.instance.zipData=new JSZip(t),e()},t,RES.ResourceItem.TYPE_BIN)})]})})},e.prototype.loadscene=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return PlatformUtil.isWxPlatform()?[4,RES.loadConfig("default.res.json?v="+GameVo.assetVersion,GameVo.RES_PATH)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,this.loadResource()];case 3:return t=e.sent(),this.inLoad=!1,console.log("完成游戏资源配置加载",(new Date).getTime()),0!=t?(1==t&&this.preloadView.updatetip("客户端更新完毕，请重启"),2==t&&this.preloadView.updatetip("加载资源异常,请刷新"),[2]):(this.checkLogin(),[2])}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o=this;return __generator(this,function(r){switch(r.label){case 0:return this.preloadView.updatetip("正在检查版本更新"),t={result:-1,data:!1},PlatformUtil.isWxPlatform()?[4,platform.checkviserion()]:[3,2];case 1:t=r.sent(),r.label=2;case 2:return 0==t.result&&t.data?(e=0,setInterval(function(){e++;var t="";1==e?t=".":2==e?t="..":(t="...",e=0),o.preloadView.updatetip("正在更新新版本"+t)},500),[2,1]):[3,3];case 3:return r.trys.push([3,7,,8]),this.inLoad=!0,this.preloadView.updatetip("准备加载资源"),[4,this.loadTheme()];case 4:return r.sent(),this.preloadView.setPreTip("解析配置文件:"),[4,RES.loadGroup("config",0,this.preloadView)];case 5:return r.sent(),this.preloadView.setPreTip("加载资源文件:"),[4,RES.loadGroup("preload",0,this.preloadView)];case 6:return r.sent(),[2,0];case 7:return n=r.sent(),console.error(n),[3,8];case 8:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var o=new eui.Theme("resource/default.thm.json",t.stage);o.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.checkLogin=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return core.run(this.stage),this.preloadView.updatetip("正在获取登录信息"),[4,platform.login()];case 1:return t=e.sent(),t&&t.hasOwnProperty("nickName")?(GameVo.wxInfo=t,console.log("获取登录信息成功："+GameVo.wxInfo),this.preloadView.updatetip("开始登录"),this.login()):(GameVo.isDedeg=egret.getOption("isDebug")?!0:!1,egret.getOption("user_id")?(LoginSelect.otherData.loginId=egret.getOption("user_id")+"m",LoginSelect.otherData.nickName=egret.getOption("nick_name"),LoginSelect.otherData.sex=egret.getOption("sex"),LoginSelect.otherData.avatarUrl=egret.getOption("avatar_url"),LoginSelect.testLoginData=LoginSelect.otherData,this.login()):core.UI.runScene(LoginSelect,this.login.bind(this),egret.getOption("isDebug"))),[2]}})})},e.prototype.login=function(){new NetLogin(this.createGameScene.bind(this))},e.prototype.createGameScene=function(){this.preloadView.parent&&this.preloadView.parent.removeChild(this.preloadView),core.singleton(WxRank).loadAsset(),core.singleton(WxRank).loadUserData(),core.singleton(SecondRequestHandler).afterLoginHanler(),core.UI.runScene(MainScene)},e.pushError=function(t){t+=" t="+(new Date).getTime(),console.log("catch error:",t);var e=new egret.ByteArray;e.writeUTFBytes(t),GameHttp.request(PUser.pushError(egret.Base64Util.encode(e.buffer)))},e.needZip=!1,e}(eui.UILayer);__reflect(Main.prototype,"Main");var JSONProcessor=function(){function t(){}return t.prototype.onLoadStart=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,o,r,i,a;return __generator(this,function(s){return n=e.url,-1==n.indexOf("default.res.json?v=")&&-1==n.indexOf("config/")&&-1==n.indexOf("gameEui")?[2,t.load(e,RES.processor.JsonProcessor)]:(n=-1!=n.indexOf("gameEui")?"config/"+n:-1!=n.indexOf("default.res.json?v=")?"config/default.res.json":"config/"+e.name.replace("_json",".json"),o=ConfigCenter.instance.zipData,r=o.file(n),i=r.asText(),a=JSON.parse(i.toString()),[2,a])})})},t.prototype.onRemoveStart=function(t,e){return Promise.resolve()},t}();__reflect(JSONProcessor.prototype,"JSONProcessor",["RES.processor.Processor"]);var core;!function(t){var e=function(){function e(e){this._tooltipLayer=e,this._items=[],t.display.setFullDisplay(this)}return e.prototype.show=function(e,o){void 0===o&&(o=void 0);var r;r=t.is.string(e)?{text:e}:e,t.obj.hasValue(r,"color")||(r.color=0),t.obj.hasValue(r,"size")||(r.size=20),t.obj.hasValue(r,"delay")||(r.delay=1500);var i=t.pool.getPool(n).pop(r,o);this.createItem(i,r.delay)},e.prototype.createItem=function(t,e){var n=this;this._tooltipLayer.addChild(t),this._items.push(t);var o=t.getAnimation();o.show().then(function(){return o.delay(e)}).then(function(){return o.close()}).then(function(){n.removeItem(t)}),egret.callLater(function(){var t=new r;t.layout(n._items)},this)},e.prototype.removeItem=function(e){var o=this._items.indexOf(e);o>=0&&(this._items.splice(o,1),t.pool.getPool(n).push(e),t.display.removeFromParent(e))},e.prototype.customView=function(e,o,r){void 0===r&&(r=1500);var i=t.pool.getPool(n).pop(o,e);this.createItem(i,r)},e}();t.Tooltip=e,__reflect(e.prototype,"core.Tooltip");var n=function(t){function e(){var e=t.call(this)||this;return e.setAnimation(new o(e)),e}return __extends(e,t),e.prototype.init=function(t,e){e?this.skinName=e:this.skinName="TooltipSkin",this.data=t,this.onEnter()},e.prototype.onEnter=function(){this.label&&(this.data.text.indexOf("<font")>-1?this.label.textFlow=(new egret.HtmlTextParser).parser(this.data.text):this.label.text=this.data.text)},e.prototype.onExit=function(){},e}(t.BaseComponent);t.TooltipItem=n,__reflect(n.prototype,"core.TooltipItem");var o=function(){function t(t){this._item=t}return t.prototype.open=function(){return Promise.resolve()},t.prototype.show=function(){var t=this;return new Promise(function(e,n){egret.Tween.removeTweens(t._item),t._item.visible=!0,t._item.scaleX=t._item.scaleY=2,t._item.alpha=1,egret.Tween.get(t._item).to({scaleX:1,scaleY:1},300).call(function(){e()})})},t.prototype.delay=function(t){var e=this;return new Promise(function(n,o){egret.Tween.get(e._item).wait(t).call(function(){n()})})},t.prototype.close=function(){var t=this;return new Promise(function(e,n){egret.Tween.get(t._item).to({alpha:0},200).call(function(){egret.Tween.removeTweens(t._item),e()})})},t}();t.TooltipAnimation=o,__reflect(o.prototype,"core.TooltipAnimation",["core.IUiAnimation"]);var r=function(){function e(){}return e.prototype.getTotalHeight=function(t,e){return void 0===e&&(e=0),t.reduce(function(t,e){return t+e.height},0)+t.length*e},e.prototype.layout=function(e){if(0!=e.length){var n=5,o=e.length,r=t.stage.stageWidth,i=t.stage.stageHeight,a=i/2,s=.8*i,c=this.getTotalHeight(e,n);a>c?c=a:c>s&&(c=s);for(var u=0,h=o-1;h>=0;h--)t.display.setAnchor(e[h],.5),e[h].y=c-u,u+=e[h].height+n,e[h].x=r/2}},e}();t.TooltipLayout=r,__reflect(r.prototype,"core.TooltipLayout"),window.Tooltip=e}(core||(core={}));var core;!function(t){var e;!function(t){t[t.None=0]="None",t[t.Scene=1]="Scene",t[t.Common=2]="Common",t[t.Panel=3]="Panel",t[t.Box=4]="Box",t[t.Guide=5]="Guide",t[t.TOP=6]="TOP",t[t.Tooltip=7]="Tooltip"}(e=t.UiType||(t.UiType={}));var n=function(n){function o(){var e=n.call(this)||this;if(e._containerList=[],e._preloadMap=new Map,e._boxMaps=new Map,e._isCleaning=!1,o._instance)throw Error("UILayer singleton already constructed!");return e.touchEnabled=!1,e._sceneLayer=new eui.UILayer,e._sceneLayer.touchEnabled=!1,e.addChild(e._sceneLayer),e._commonLayer=new eui.UILayer,e._commonLayer.touchEnabled=!1,e.addChild(e._commonLayer),e._boxLayer=new eui.UILayer,e._boxLayer.touchEnabled=!1,e.addChild(e._boxLayer),e._panelLayer=new eui.UILayer,e._panelLayer.touchEnabled=!1,e.addChild(e._panelLayer),e._guideLayer=new eui.UILayer,e._guideLayer.touchEnabled=!1,e.addChild(e._guideLayer),e._tooltipLayer=new eui.UILayer,e._tooltipLayer.touchEnabled=!1,e.addChild(e._tooltipLayer),e._topLayer=new eui.UILayer,e._topLayer.touchEnabled=!1,e.addChild(e._topLayer),t.display.setFullDisplay(e),e._containerList=[e._panelLayer,e._boxLayer,e._topLayer,e._guideLayer,e._commonLayer,e._sceneLayer,e._tooltipLayer],e}return __extends(o,n),Object.defineProperty(o,"instance",{get:function(){return this._instance||(this._instance=new o),this._instance},enumerable:!0,configurable:!0}),o.prototype.runScene=function(n){for(var o=[],r=1;r<arguments.length;r++)o[r-1]=arguments[r];this._curScene&&(this.remove(this._curScene),this._curScene=null);var i=new n;return i.setArgs(o),i.setUiType(e.Scene),this._curScene=i,t.display.setFullDisplay(i),this._curScene.removeing=!1,this._sceneLayer.addChild(i),t.uiAnimation.scene&&t.uiAnimation.scene.open().then(function(){}),this._curScene},o.prototype.getScene=function(){return this._curScene},o.prototype.addBox=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.addUICompAsync(t,e.Box,n)]})})},o.prototype.addBoxSync=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.addUICompSync(t,e.Box,n)},o.prototype.addCommon=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.addUICompAsync(t,e.Common,n)]})})},o.prototype.addCommonSync=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.addUICompSync(t,e.Common,n)},o.prototype.addTop=function(t,n){return void 0===n&&(n=[]),__awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.addUICompAsync(t,e.TOP,n)]})})},o.prototype.addTopSync=function(t,n){return void 0===n&&(n=[]),this.addUICompSync(t,e.TOP,n)},o.prototype.addTooltip=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.addUICompAsync(t,e.Tooltip,n)]})})},o.prototype.addTooltipSync=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.addUICompSync(t,e.Tooltip,n)},o.prototype.addGuide=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.addUICompAsync(t,e.Guide,n)]})})},o.prototype.addGuideSync=function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return this.addUICompSync(t,e.Guide,n)},o.prototype.addUICompAsync=function(e,n,o){return void 0===o&&(o=[]),__awaiter(this,void 0,void 0,function(){var r,i,a;return __generator(this,function(s){switch(s.label){case 0:return r=this.getUIComponent(e),i=t.display.getComponentName(r),this._preloadMap.has(i)?(t.showSimpleLoading(),a=t.getPreloadList(this._preloadMap.get(i)),[4,Promise.all(a)]):[3,2];case 1:s.sent(),t.hideSimpleLoading(),s.label=2;case 2:return this.addUIComp(r,n,o),[2,r]}})})},o.prototype.addUICompSync=function(t,e,n){void 0===n&&(n=[]);var o=this.getUIComponent(t);return this.addUIComp(o,e,n),o},o.prototype.getUIComponent=function(e){var n,o=t.display.getComponentName(e);return n=this._boxMaps.get(o),n||(n=t.isType(e)?new e:e,console.log("newComp:",o)),t.Config.uiCache&&this._boxMaps.set(o,n),n},o.prototype.addUIComp=function(e,n,o){void 0===o&&(o=[]);var r=t.display.getComponentName(e);e.initEventListener(),e.setArgs(o),e.setUiType(n),e.removeing=!1;var i=this.getLayer(n);i.addChild(e);var a=this.getUiAnimation(n);return a?a.open().then(function(){t.postNotification(t.CoreNotificationDef.UI_ADD,r,!0)}):t.postNotification(t.CoreNotificationDef.UI_ADD,r,!0),e},o.prototype.addPreload=function(t,e){this._preloadMap.has(t)||this._preloadMap.set(t,e)},o.prototype.isUiCache=function(t){return this._boxMaps.has(t)},o.prototype.getBoxMap=function(){return this._boxMaps},o.prototype.getBox=function(t){return this.getUICompByType(t,e.Box)},o.prototype.getUICompByType=function(t,e){var n=this.getLayer(e);return n?n.getChildByName(t):null},o.prototype.remove=function(t){var e=this;if(t&&t.removeing!==!0){t.removeing=!0;var n=t.getUiType();AudioManager.playerSoundMusic("close_mp3");var o=this.getUiAnimation(n);o?o.close().then(function(){e.forceRemove(t)}):this.forceRemove(t)}},o.prototype.forceRemove=function(e){e.destoryData(),t.display.removeFromParent(e);var n=t.display.getComponentName(e);this._isCleaning||t.postNotification(t.CoreNotificationDef.UI_NORMAL_REMOVE,n),t.postNotification(t.CoreNotificationDef.UI_REMOVE,n)},o.prototype.clearBox=function(){this.clearComps(e.Box)},o.prototype.clearPanel=function(){this.clearComps(e.Panel)},o.prototype.clearTop=function(){this.clearComps(e.TOP)},o.prototype.clearUiByType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{for(var n=__values(t),o=n.next();!o.done;o=n.next()){var r=o.value;this.clearComps(r)}}catch(i){a={error:i}}finally{try{o&&!o.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}var a,s},o.prototype.clearComps=function(e){this._isCleaning=!0;var n=this.getLayer(e);if(n)for(var o=n.numChildren;o>0;)this.remove(n.getChildAt(0)),o--;this._isCleaning=!1,t.postNotification(t.CoreNotificationDef.UI_CLEAR,e)},o.prototype.isExistComp=function(t){var e=!1;try{for(var n=__values(this._containerList),o=n.next();!o.done;o=n.next()){var r=o.value;if(e=r.$children.find(function(e){return e==t})?!0:!1)break}}catch(i){a={error:i}}finally{try{o&&!o.done&&(s=n["return"])&&s.call(n)}finally{if(a)throw a.error}}return e;var a,s},o.prototype.isExistCompByName=function(e){var n=!1;try{for(var o=__values(this._containerList),r=o.next();!r.done;r=o.next()){var i=r.value;if(n=i.$children.find(function(n){return t.display.getComponentName(n)==e})?!0:!1)break}}catch(a){s={error:a}}finally{try{r&&!r.done&&(c=o["return"])&&c.call(o)}finally{if(s)throw s.error}}return n;var s,c},o.prototype.getLayer=function(t){var n;switch(t){case e.Box:n=this._boxLayer;break;case e.Common:n=this._commonLayer;break;case e.Panel:n=this._panelLayer;break;case e.Guide:n=this._guideLayer;break;case e.Tooltip:n=this._tooltipLayer;break;case e.Scene:n=this._sceneLayer;break;case e.TOP:n=this._topLayer}return n},o.prototype.getUiAnimation=function(n){var o;return n==e.Scene?o=t.uiAnimation.scene:n==e.Box?o=t.uiAnimation.box:n==e.Common?o=t.uiAnimation.common:n==e.Panel?o=t.uiAnimation.panel:n==e.Guide?o=t.uiAnimation.guide:n==e.Tooltip&&(o=t.uiAnimation.tooltip),o},o.prototype.getTooltip=function(){return this._tooltip||(this._tooltip=new t.Tooltip(this._tooltipLayer)),this._tooltip},o.prototype.tooltip=function(t,e){},o.prototype.customTooltip=function(t,e,n){var o=this.getTooltip();o&&o.customView(t,e,n)},o.remove=function(t){o.instance.remove(t)},o.tooltip=function(t,e){o.instance.tooltip(t,e)},o.customTooltip=function(t,e,n){o.instance.customTooltip(t,e,n)},o.isExistComp=function(t){return o.instance.isExistComp(t)},o.isExistCompByName=function(t){return o.instance.isExistCompByName(t)},o.clearBox=function(){o.instance.clearComps(e.Box)},o.clearPanel=function(){o.instance.clearComps(e.Panel)},o.clearTop=function(){o.instance.clearComps(e.TOP)},o.clearUiByType=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{for(var n=__values(t),r=n.next();!r.done;r=n.next()){var i=r.value;o.instance.clearComps(i)}}catch(a){s={error:a}}finally{try{r&&!r.done&&(c=n["return"])&&c.call(n)}finally{if(s)throw s.error}}var s,c},o.getBox=function(t){return o.instance.getUICompByType(t,e.Box)},o.getUICompByType=function(t,e){return o.instance.getUICompByType(t,e)},o.runScene=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return(r=o.instance).runScene.apply(r,__spread([t],e));var r},o.getScene=function(){return o.instance.getScene()},o.addBox=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,o.instance.addBox(t,e)]})})},o.addBoxSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.instance.addBoxSync(t,e)},o.addCommon=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,o.instance.addCommon(t,e)]})})},o.addCommonSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.instance.addCommonSync(t,e)},o.addTop=function(t,e){return void 0===e&&(e=[]),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,o.instance.addTop(t,e)]})})},o.addTopSync=function(t,e){return void 0===e&&(e=[]),o.instance.addTopSync(t,e)},o.addTooltip=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,o.instance.addTooltip(t,e)]})})},o.addTooltipSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.instance.addTooltipSync(t,e)},o.addGuide=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,o.instance.addGuide(t,e)]})})},o.addGuideSync=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.instance.addGuideSync(t,e)},o.isUiCache=function(t){return o.instance.isUiCache(t)},o.getBoxMap=function(){return o.instance.getBoxMap()},o.NameKey="__class__",o}(eui.UILayer);t.UI=n,__reflect(n.prototype,"core.UI"),window.UI=n}(core||(core={}));var core;!function(t){var e=function(){function t(){}return t}();t.UiAnimation=e,__reflect(e.prototype,"core.UiAnimation"),t.uiAnimation=new e}(core||(core={}));var AudioManager=function(){function t(){}return t.playerBgMusic=function(t){platform.playerBgMusic(t)},t.playerSoundMusic=function(e){var n=t.getItemPath(e,"loading");platform.playerSound(n)},t.subcontextBgUrl=function(){var e={};return e.subcontextBgUrl=t.getItemPath("panel_shop_01_jpg","opendata"),e.subcontextLevelBgUrl=t.getItemPath("openDataLevelBg_jpg","opendata"),e},t.getItemPath=function(e,n){t.configList[n]||(t.configList[n]=RES.getGroupByName(n));var o=t.configList[n].find(function(t){return e==t.name}),r=o.root+o.url;return r},t.configList={},t}();__reflect(AudioManager.prototype,"AudioManager");var DateUtils=function(){function t(){}return t.calcuNetDelayStart=function(){t.s_sendTimestamp=egret.getTimer()},t.calcuNetDelayEnd=function(){t.s_delay=egret.getTimer()-t.s_sendTimestamp},t.getServerTimeMill=function(){return this.s_serverTimestamp+(egret.getTimer()-this.s_clientTimestamp)},t.getServerTime=function(){return Math.floor(.001*t.getServerTimeMill())},t.setServerTime=function(t){this.s_serverTimestamp=t,this.s_clientTimestamp=egret.getTimer()},t.getNetDelay=function(){return t.s_delay},t.getServerTimeYmd=function(){return Number(t.dateFormat("yyyyMMdd",t.getServerTime()))},t.dateFormat=function(t,e){var n=new Date(1e3*e),o={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in o)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length)));return t},t.diffTimeFormat=function(t,e){var n=Math.floor(e/86400),o=Math.floor(e%86400/3600),r=Math.floor(e%3600/60),i=Math.floor(e%60);new RegExp("(d+)").test(t)||(o+=24*n),new RegExp("(h+)").test(t)||(r+=60*o);var a={"d+":n,"h+":o,"m+":r,"s+":i};for(var s in a)new RegExp("("+s+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[s]:1==(""+a[s]).length?"0"+a[s]:a[s]));return t},t.format1=function(e){return t.diffTimeFormat("hh:mm:ss",e)},t.format2=function(e){return t.dateFormat("MM-dd hh:mm",e)},t.format3=function(e){return t.dateFormat("mm分ss秒",e)
},t.format4=function(e){return t.dateFormat("hh小时mm分ss秒",e)},t.format5=function(e){return t.dateFormat("mm:ss",e)},t.format6=function(e){return t.diffTimeFormat("dd日hh时mm分",e)},t.s_serverTimestamp=0,t.s_clientTimestamp=0,t.s_delay=10,t.s_sendTimestamp=0,t}();__reflect(DateUtils.prototype,"DateUtils");var core;!function(t){var e=function(){function t(){this.m_callbackMaps=new Dictionary,this.m_sendBuffer=[]}return t.getInstance=function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},t.prototype.addEventListener=function(t,e,o,r){if(void 0===r&&(r=0),e&&o){var i=new n(e,o);i.index=0>r?0:r,i.messageID=t;var a=this.m_callbackMaps.get(t);if(a){for(var s=0,c=a.length;c>s;s++)if(i.index<a[s].index)return void a.splice(s,0,i);a.push(i)}else this.m_callbackMaps.add(t,[i])}},t.prototype.removeEventListener=function(t,e,n){var o=this.m_callbackMaps.get(t);if(o)for(var r=o.length;r>0;r--){var i=o[r-1];if(i.callback==e&&i.thisObj===n){i.isValid=!1,o.splice(r-1,1);break}}},t.prototype.sendEvent=function(t){this.m_sendBuffer.push(t),egret.callLater(this.sendAll,this)},t.prototype.flush=function(){this.sendAll()},t.prototype.sendAll=function(){var t,e=Date.now(),n=0,o=this.m_sendBuffer.length,r=this.m_sendBuffer,i=100;for(o>i&&(r=this.m_sendBuffer.splice(0,i),egret.log("分帧剩余未处理请求数："+this.m_sendBuffer.length));r.length>0;){var a=r.shift(),s=this.m_callbackMaps.get(a.messageID);if(s){s=s.concat();for(var c=0,u=s.length;u>c;c++){var h=s[c];if(h.isValid){var p=Date.now();h.bindCallback(a);var l=Date.now();l-p>n&&(n=l-p,t=h)}}}}var f=Date.now()-e,d=10,g=5;f>d&&(t&&n>g?egret.log("单帧事件派发耗时："+f+" 最高耗时事件："+t.messageID+" 耗时："+n):egret.log("单帧事件派发耗时："+f))},t}();t.EventManager=e,__reflect(e.prototype,"core.EventManager");var n=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.isValid=!0,o}return __extends(e,t),e}(t.Callback);__reflect(n.prototype,"EventCallBack")}(core||(core={}));var ImageFactory=function(){function t(){this.m_caches=new Dictionary}return Object.defineProperty(t,"instance",{get:function(){return t.s_instance||(t.s_instance=new t),t.s_instance},enumerable:!0,configurable:!0}),t.prototype.getImage=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var o=this.getFormatKey(e,t),r=this.m_caches.get(o);if(r||(r=[],this.m_caches.add(o,r)),r.length>0)return r.pop();var i=new egret.Bitmap,a=RES.getRes(o);return a?i.texture=a:RES.getResAsync(o).then(function(t){i.texture=t}),n&&(i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height),i.key=o,i},t.prototype.revertImage=function(t){if(t){var e=t.key;t.parent&&t.parent.removeChild(t);var n=this.m_caches.get(e);n&&n.push(t)}},t.prototype.getFormatKey=function(t,e){return t&&"undefined"!=t&&"null"!=t&&""!=t?t+"_"+e:e},t.prototype.checkValid=function(t,e,n){return n&&this.getFormatKey(t,e)===this.getCacheKey(n)},t.prototype.getCacheKey=function(t){return t&&t.key},t.prototype.getCacheCountByKey=function(t,e){var n=this.getFormatKey(e,t),o=this.m_caches.get(n);return o?o.length:0},t.prototype.clear=function(t,e){this.m_caches.remove(this.getFormatKey(t,e))},t.prototype.clearAll=function(){this.m_caches.clear()},t}();__reflect(ImageFactory.prototype,"ImageFactory");var core;!function(t){var e=function(){function t(){}return t.prototype.get=function(t){return egret.localStorage.getItem(t)},t.prototype.save=function(t,e){var n=!0;for(var o in t){var r=egret.localStorage.setItem(o,t[o]);r||(n=!1)}return n},t}();__reflect(e.prototype,"EgretLocalStorageProvider");var n=function(){function t(){this._transactioning=!1,this._provider=new e,this._transData={},this._prefix=""}return t.prototype.setProvider=function(t){this._provider=t},t.prototype.begin=function(){this._transactioning=!0},t.prototype.setPrefix=function(t){this._prefix=t},t.prototype.commit=function(t){Object.keys(this._transData).length>0&&this._provider.save(this._transData,t),this._transData={},this._transactioning=!1},t.prototype.getKey=function(t){return""==this._prefix?t:this._prefix+"-"+t},t.prototype.getItem=function(t){var e=this._provider.get(this.getKey(t));return e||null},t.prototype.getInt=function(t,e){void 0===e&&(e=0);var n=this.getItem(t);if(!n)return e;var o=parseInt(n);return isNaN(o)?e:e},t.prototype.getString=function(t,e){void 0===e&&(e="");var n=this.getItem(t);return n?n:e},t.prototype.getBool=function(t,e){void 0===e&&(e=!1);var n=this.getItem(t);return n?"true"===n:e},t.prototype.getFloat=function(t,e){void 0===e&&(e=0);var n=this.getItem(t);if(!n)return e;var o=parseFloat(n);return isNaN(o)?e:o},t.prototype.setItem=function(t,e){return this._transactioning?(this._transData[this.getKey(t)]=e,!0):this._provider.save((n={},n[t]=e,n));var n},t.prototype.setInt=function(t,e){return isNaN(e)&&(e=0),this.setItem(t,e+"")},t.prototype.setString=function(t,e){return this.setItem(t,e)},t.prototype.setBool=function(t,e){return this.setItem(t,e===!0?"true":"false")},t.prototype.setFloat=function(t,e){return isNaN(e)&&(e=0),this.setItem(t,e+"")},t.prototype.removeItem=function(t){egret.localStorage.removeItem(t)},t}();__reflect(n.prototype,"LocalStorage",["core.ILocalStorage"]),t.localStorage=new n}(core||(core={}));var MathUtils=function(){function t(){}return t.ceil=function(t){return t%1==0?t:t>0?t+1<<0:t<<0},t.random=function(t,e){return Math.random()*(e-t)+t<<0},t.randomintM=function(t,e){return Math.floor(Math.random()*(e-t)+t)+1},t.randomInt=function(t,e){return Math.round(Math.random()*(e-t-2)+t+1)},t.randomIntNM=function(t,e){return Math.round(Math.random()*(e-t)+t)},t.getRandomElement=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.distance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.pointDistance=function(t,e,n,o){var r=n-t,i=o-e;return Math.pow(r*r+i*i,.5)},t}();__reflect(MathUtils.prototype,"MathUtils");var MCFactory=function(){function t(){this.m_factorys=new Dictionary,this.m_mcFactorys=new Dictionary}return t.prototype.getMovieClip=function(t,e,n){return void 0===n&&(n=!1),__awaiter(this,void 0,void 0,function(){var o,r,i,a,s,c,u,i;return __generator(this,function(h){switch(h.label){case 0:return t&&"undefined"!=t&&"null"!=t?(o=t+">"+e,r=this.m_factorys.get(o),r||(r=[],this.m_factorys.add(o,r)),r.length>0?(i=r.pop(),[2,i]):(a=this.m_mcFactorys.get(t),a?[3,3]:[4,RES.getResAsync(t+"_json")])):[2,null];case 1:return s=h.sent(),[4,RES.getResAsync(t+"_png")];case 2:c=h.sent(),a=new egret.MovieClipDataFactory(s,c),a.enableCache=!0,this.m_mcFactorys.add(t,a),h.label=3;case 3:return u=a.generateMovieClipData(e),u.mcData?(i=new egret.MovieClip(u),i.gotoAndStop(1),i.key=o,n&&(i.anchorOffsetX=.5*(i.width+2*u.mcData.frames[0].x),i.anchorOffsetY=.5*(i.height+2*u.mcData.frames[0].y)),[2,i]):[2,null]}})})},t.prototype.checkValid=function(t,e,n){return n&&this.getFormatKey(t,e)===this.getCacheKey(n)},t.prototype.getCacheKey=function(t){return t&&t.key},t.prototype.getFormatKey=function(t,e){return t+">"+e},t.prototype.revertMovieClip=function(t){if(t){t.gotoAndStop(1);var e=t.key;t.parent&&t.parent.removeChild(t),t.visible=!0;var n=this.m_factorys.get(e);n&&n.push(t)}},t.prototype.clear=function(t,e){this.m_mcFactorys.remove(t),this.m_factorys.remove(this.getFormatKey(t,e))},t.prototype.clearAll=function(){this.m_mcFactorys.clear(),this.m_factorys.clear()},Object.defineProperty(t,"instance",{get:function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},enumerable:!0,configurable:!0}),t}();__reflect(MCFactory.prototype,"MCFactory");var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var o=Array(16),r=Array(16),i=0;16>i;i++)o[i]=909522486^n[i],r[i]=1549556828^n[i];var a=this.binl_md5(o.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(a),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,o=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",i=0;i<t.length;i++)n=t.charCodeAt(i),r+=o.charAt(n>>>4&15)+o.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o="",r=t.length,i=0;r>i;i+=3)for(var a=t.charCodeAt(i)<<16|(r>i+1?t.charCodeAt(i+1)<<8:0)|(r>i+2?t.charCodeAt(i+2):0),s=0;4>s;s++)o+=8*i+6*s>8*t.length?this.b64pad:n.charAt(a>>>6*(3-s)&63);return o},t.prototype.rstr2any=function(t,e){var n,o,r,i,a,s=e.length,c=Array(Math.ceil(t.length/2));for(n=0;n<c.length;n++)c[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var u=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),h=Array(u);for(o=0;u>o;o++){for(a=Array(),i=0,n=0;n<c.length;n++)i=(i<<16)+c[n],r=Math.floor(i/s),i-=r*s,(a.length>0||r>0)&&(a[a.length]=r);h[o]=i,c=a}var p="";for(n=h.length-1;n>=0;n--)p+=e.charAt(h[n]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,n,o="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?o+=String.fromCharCode(e):2047>=e?o+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?o+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(o+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return o},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,o=-271733879,r=-1732584194,i=271733878,a=0;a<t.length;a+=16){var s=n,c=o,u=r,h=i;n=this.md5_ff(n,o,r,i,t[a+0],7,-680876936),i=this.md5_ff(i,n,o,r,t[a+1],12,-389564586),r=this.md5_ff(r,i,n,o,t[a+2],17,606105819),o=this.md5_ff(o,r,i,n,t[a+3],22,-1044525330),n=this.md5_ff(n,o,r,i,t[a+4],7,-176418897),i=this.md5_ff(i,n,o,r,t[a+5],12,1200080426),r=this.md5_ff(r,i,n,o,t[a+6],17,-1473231341),o=this.md5_ff(o,r,i,n,t[a+7],22,-45705983),n=this.md5_ff(n,o,r,i,t[a+8],7,1770035416),i=this.md5_ff(i,n,o,r,t[a+9],12,-1958414417),r=this.md5_ff(r,i,n,o,t[a+10],17,-42063),o=this.md5_ff(o,r,i,n,t[a+11],22,-1990404162),n=this.md5_ff(n,o,r,i,t[a+12],7,1804603682),i=this.md5_ff(i,n,o,r,t[a+13],12,-40341101),r=this.md5_ff(r,i,n,o,t[a+14],17,-1502002290),o=this.md5_ff(o,r,i,n,t[a+15],22,1236535329),n=this.md5_gg(n,o,r,i,t[a+1],5,-165796510),i=this.md5_gg(i,n,o,r,t[a+6],9,-1069501632),r=this.md5_gg(r,i,n,o,t[a+11],14,643717713),o=this.md5_gg(o,r,i,n,t[a+0],20,-373897302),n=this.md5_gg(n,o,r,i,t[a+5],5,-701558691),i=this.md5_gg(i,n,o,r,t[a+10],9,38016083),r=this.md5_gg(r,i,n,o,t[a+15],14,-660478335),o=this.md5_gg(o,r,i,n,t[a+4],20,-405537848),n=this.md5_gg(n,o,r,i,t[a+9],5,568446438),i=this.md5_gg(i,n,o,r,t[a+14],9,-1019803690),r=this.md5_gg(r,i,n,o,t[a+3],14,-187363961),o=this.md5_gg(o,r,i,n,t[a+8],20,1163531501),n=this.md5_gg(n,o,r,i,t[a+13],5,-1444681467),i=this.md5_gg(i,n,o,r,t[a+2],9,-51403784),r=this.md5_gg(r,i,n,o,t[a+7],14,1735328473),o=this.md5_gg(o,r,i,n,t[a+12],20,-1926607734),n=this.md5_hh(n,o,r,i,t[a+5],4,-378558),i=this.md5_hh(i,n,o,r,t[a+8],11,-2022574463),r=this.md5_hh(r,i,n,o,t[a+11],16,1839030562),o=this.md5_hh(o,r,i,n,t[a+14],23,-35309556),n=this.md5_hh(n,o,r,i,t[a+1],4,-1530992060),i=this.md5_hh(i,n,o,r,t[a+4],11,1272893353),r=this.md5_hh(r,i,n,o,t[a+7],16,-155497632),o=this.md5_hh(o,r,i,n,t[a+10],23,-1094730640),n=this.md5_hh(n,o,r,i,t[a+13],4,681279174),i=this.md5_hh(i,n,o,r,t[a+0],11,-358537222),r=this.md5_hh(r,i,n,o,t[a+3],16,-722521979),o=this.md5_hh(o,r,i,n,t[a+6],23,76029189),n=this.md5_hh(n,o,r,i,t[a+9],4,-640364487),i=this.md5_hh(i,n,o,r,t[a+12],11,-421815835),r=this.md5_hh(r,i,n,o,t[a+15],16,530742520),o=this.md5_hh(o,r,i,n,t[a+2],23,-995338651),n=this.md5_ii(n,o,r,i,t[a+0],6,-198630844),i=this.md5_ii(i,n,o,r,t[a+7],10,1126891415),r=this.md5_ii(r,i,n,o,t[a+14],15,-1416354905),o=this.md5_ii(o,r,i,n,t[a+5],21,-57434055),n=this.md5_ii(n,o,r,i,t[a+12],6,1700485571),i=this.md5_ii(i,n,o,r,t[a+3],10,-1894986606),r=this.md5_ii(r,i,n,o,t[a+10],15,-1051523),o=this.md5_ii(o,r,i,n,t[a+1],21,-2054922799),n=this.md5_ii(n,o,r,i,t[a+8],6,1873313359),i=this.md5_ii(i,n,o,r,t[a+15],10,-30611744),r=this.md5_ii(r,i,n,o,t[a+6],15,-1560198380),o=this.md5_ii(o,r,i,n,t[a+13],21,1309151649),n=this.md5_ii(n,o,r,i,t[a+4],6,-145523070),i=this.md5_ii(i,n,o,r,t[a+11],10,-1120210379),r=this.md5_ii(r,i,n,o,t[a+2],15,718787259),o=this.md5_ii(o,r,i,n,t[a+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,c),r=this.safe_add(r,u),i=this.safe_add(i,h)}return[n,o,r,i]},t.prototype.md5_cmn=function(t,e,n,o,r,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(o,i)),r),n)},t.prototype.md5_ff=function(t,e,n,o,r,i,a){return this.md5_cmn(e&n|~e&o,t,e,r,i,a)},t.prototype.md5_gg=function(t,e,n,o,r,i,a){return this.md5_cmn(e&o|n&~o,t,e,r,i,a)},t.prototype.md5_hh=function(t,e,n,o,r,i,a){return this.md5_cmn(e^n^o,t,e,r,i,a)},t.prototype.md5_ii=function(t,e,n,o,r,i,a){return this.md5_cmn(n^(e|~o),t,e,r,i,a)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),o=(t>>16)+(e>>16)+(n>>16);return o<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var TimerManager=function(){function t(){if(t.s_instance)throw new Error("单例类不可实例化");egret.startTick(this.onTick,this),this.m_tickList=[]}return Object.defineProperty(t,"instance",{get:function(){return null==t.s_instance&&(t.s_instance=new t),t.s_instance},enumerable:!0,configurable:!0}),t.prototype.clearUnvalidData=function(){for(var t=this.m_tickList.length,e=t-1;e>=0;e--){var n=this.m_tickList[e];n.isValid||n.endCallback||this.m_tickList.splice(e,1)}},t.prototype.onTick=function(t){for(var e=this.m_tickList.concat(),n=!1,o=0,r=e.length;r>o;o++){var i=e[o];if(t-i.timestamp>i.delay)if(i.isValid){if(i.timestamp=t,i.count++,i.callback){egret.getTimer();i.callback.call(i.thisObj,i);egret.getTimer()}i.count==i.maxCount&&(i.isValid=!1)}else i.count==i.maxCount&&(i.endCallback&&(i.endCallback.call(i.thisObj,i),i.endCallback=null),n=!0)}return n&&this.clearUnvalidData(),!1},t.prototype.addTick=function(t,e,n,o){for(var r=[],i=4;i<arguments.length;i++)r[i-4]=arguments[i];var a=this.m_tickList;a||(a=[],this.m_tickList=a);var s=new TickData(t,e);return s.delay=n,s.count=0,s.maxCount=0>=o?Number.MAX_VALUE:o,s.args=r,s.timestamp=egret.getTimer(),s.isValid=!0,a.push(s),s},t.prototype.addKeyTick=function(t,e,n,o,r){for(var i=[],a=5;a<arguments.length;a++)i[a-5]=arguments[a];var s=this.getTickData(t,n);return s&&!s.isValid&&this.removeTicksByKeyAndContext(t,n),s||(s=this.addTick.apply(this,__spread([e,n,o,r],i)),s.tickKey=t),s},t.prototype.getTickData=function(t,e){return this.m_tickList.find(function(n){return n.tickKey==t&&n.thisObj==e})},t.prototype.removeTick=function(t,e){var n=this.m_tickList;if(n)for(var o=n.length;o>0;o--){var r=n[o-1];(!r.isValid||r.callback==t&&r.thisObj==e)&&n.splice(o-1,1)}},t.prototype.removeTicks=function(t){var e=this.m_tickList;if(e)for(var n=e.length;n>0;n--){var o=e[n-1];o.isValid&&o.thisObj!=t||e.splice(n-1,1)}},t.prototype.removeTickByKey=function(t){var e=this.m_tickList;if(e)for(var n=e.length;n>0;n--){var o=e[n-1];o.isValid&&o.tickKey!=t||e.splice(n-1,1)}},t.prototype.removeTicksByKeyAndContext=function(t,e){var n=this.m_tickList;if(n)for(var o=n.length;o>0;o--){var r=n[o-1];(!r.isValid||r.tickKey==t&&r.thisObj==e)&&n.splice(o-1,1)}},t.prototype.getTicks=function(t){if(void 0===t&&(t=0),0==t)return this.m_tickList;var e=this.m_tickList.filter(function(e){return 1==t&&e.isValid||2==t&&!e.isValid});return e},t.prototype.removeAllTicks=function(){this.m_tickList.length=0},t}();__reflect(TimerManager.prototype,"TimerManager");var TickData=function(t){function e(e,n){return t.call(this,e,n)||this}return __extends(e,t),e}(core.Callback);__reflect(TickData.prototype,"TickData");var WebUtils=function(){function t(){}return t.parseURLParams=function(){var e={};egret.log("解析URL参数"+location.search);var n=location.search.match(/(\w+)=.+?(?=(\&|$))/gi);if(n)for(var o=0,r=n.length;r>o;o++){var i=n[o].split("=");i&&2==i.length&&(e[i[0]]=i[1])}t.urlParams=e},t.addKeyboardListener=function(t){document.onkeydown=function(e){e&&(!t||t(e))&&core.EventManager.getInstance().sendEvent(new core.KeyboardEventData(core.EventID.KEYBOARD_DOWN,e))},document.onkeyup=function(e){e&&(!t||t(e))&&core.EventManager.getInstance().sendEvent(new core.KeyboardEventData(core.EventID.KEYBOARD_UP,e))}},t.getHiddenProp=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null},t.isHidden=function(){var e=t.getHiddenProp();return e?document[e]:!1},t.addPageVisableListenter=function(){var e=t.getHiddenProp();if(e){var n=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(n,function(){egret.log("通用API：页面是否隐藏:"+!t.isHidden()),t.isHidden()?core.EventManager.getInstance().sendEvent(new core.EventData(t.PAGE_HIDE)):core.EventManager.getInstance().sendEvent(new core.EventData(t.PAGE_SHOW))},!1)}},t.PAGE_HIDE="WebUtils.PAGE_HIDE",t.PAGE_SHOW="WebUtils.PAGE_SHOW",t}();__reflect(WebUtils.prototype,"WebUtils");var GameVo=function(){function t(){}return t.getP=function(){return t.isIos?1:2},t.isIos=!1,t.IsActive=!0,t.httpEnable=!0,t.isDedeg=!1,t.assetVersion="",t.resourceVersion="1.0.01",t.configVersion="",t.RES_PATH="http://127.0.0.1:3333/EgretWxgameTemplate/EgretTemplateProject_wxgame_remote/"+t.resourceVersion+"/resource",t}();__reflect(GameVo.prototype,"GameVo");var ModuleMeditore=function(t){function e(){return t.call(this,n.NAME)||this}return __extends(e,t),n=e,e.prototype.listNotificationInterests=function(){var e=["test_send","test_pos"];return e.concat(t.prototype.listNotificationInterests.call(this))},e.prototype.handleNotification=function(t){switch(t.getName()){case"test_send":console.log.apply(console,__spread(["test_send："],t.getArr()));break;case"test_pos":console.log.apply(console,__spread(["test_pos"],t.getBody()))}},e.prototype.openSome=function(){console.log("openSome")},e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.NAME="ModuleMeditore",__decorate([core.notice("openSome")],e.prototype,"openSome",null),e=n=__decorate([core.mediator()],e);var n}(core.Mediator);__reflect(ModuleMeditore.prototype,"ModuleMeditore");var LanguageType;!function(t){t[t.zh=0]="zh",t[t.en=1]="en"}(LanguageType||(LanguageType={}));var ShareRewardType;!function(t){t[t.Random=0]="Random",t[t.PutPatient=1]="PutPatient",t[t.AppointSuccess=2]="AppointSuccess",t[t.AppointFail=3]="AppointFail",t[t.BuildingUp=4]="BuildingUp",t[t.HospitalUp=5]="HospitalUp",t[t.Ransom=6]="Ransom",t[t.PutCattle=14]="PutCattle",t[t.BePutCattle=15]="BePutCattle",t[t.NewPatient=16]="NewPatient"}(ShareRewardType||(ShareRewardType={}));var ConfigCenter=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.getConfigRoot=function(t,e){if(void 0===e&&(e="id"),!this._configData.hasOwnProperty(t)){var n=RES.getRes(t).root,o={};n.forEach(function(t){var n=t[e];o[n]=t}),this._configData[t]=o}return this._configData[t]},t.getValue=function(e,n,o,r){void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r="id");var i=t.getConfigItem(e,n,r);return i?i[o]:null},t.getConfigItem=function(e,n,o){void 0===o&&(o="id");var r=t.getConfigRoot(e,o);return null!=n?r[n]:r},t.getLanguageNameObj=function(t){var e=this.loadGameConfigLanguage(),n=e[t];return n?n:{key:t,name:t}},t.getLanguageName=function(e){return t.getLanguageNameObj(e).name},t.loadGameConfigLanguage=function(){if(!this._configData.hasOwnProperty("GameConfigLanguage_json")){var e=t.getLanguageConfigList(),n={};e.forEach(function(t){var e=RES.getRes(t).root;e.forEach(function(t){n[t.key]=t})}),this._configData.GameConfigLanguage_json=n}return this._configData.GameConfigLanguage_json},t.getLanguageConfigList=function(){var e=RES.config.config,n=e.groups.preload,o=[],r=t.LANGUAGE_TYPE==LanguageType.zh?"GameConfigLanguage_zh":"GameConfigLanguage_en";return o=n.filter(function(t){return-1!=t.indexOf(r)}),console.log.apply(console,__spread(["语言表："],o)),o},t.getConfigItemCount=function(t){var e=RES.getRes(t).root;return e.length},t.LANGUAGE_TYPE=0,t._configData={},t}();__reflect(ConfigCenter.prototype,"ConfigCenter");var ConfigUtil=function(){function t(){}return t.getPalyerLevelByExp=function(t){for(var e,n=RES.getRes("GameConfigPlayerLevel_json").root,o=n.length,r=0;o>r;r++){if(t<n[r].exp)return e;e=n[r].level}return e},t.getWorkerLevelByExp=function(t){for(var e,n=RES.getRes("GameConfigWorkerLevel_json").root,o=n.length,r=o-1;r>=0;r--){if(t>=n[r].exp)return n[r];e=n[r]}return e},t.getWorkerConfigById=function(t){var e=ConfigCenter.getConfigItem("GameConfigWorker_json",t,"id");return e},t.getPatientConfigById=function(t){var e=ConfigCenter.getConfigItem("GameConfigPatient_json",t,"id");return e},t.getGameConfigValue=function(t){var e=ConfigCenter.getValue("GameConfigValues_json",t,"value","key");return e},t.loadJson=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){var e,n,o,r,i,a;return __generator(this,function(s){switch(s.label){case 0:e=[];try{for(n=__values(t),o=n.next();!o.done;o=n.next())r=o.value,e.push(RES.getResAsync(r))}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(i)throw i.error}}return[4,Promise.all(e)];case 1:return s.sent(),[2]}})})},t.loadJsonWithMask=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return __awaiter(this,void 0,void 0,function(){var e,n,o,r,i,a;return __generator(this,function(s){switch(s.label){case 0:core.showSimpleLoading(),e=[];try{for(n=__values(t),o=n.next();!o.done;o=n.next())r=o.value,e.push(RES.getResAsync(r))}catch(c){i={error:c}}finally{try{o&&!o.done&&(a=n["return"])&&a.call(n)}finally{if(i)throw i.error}}return[4,Promise.all(e)];case 1:return s.sent(),core.hideSimpleLoading(),[2]}})})},t}();__reflect(ConfigUtil.prototype,"ConfigUtil");var DoubleKeyConfig=function(){function t(){this._configData={}}return t.prototype.getConfigRoot=function(t,e,n){if(!this._configData.hasOwnProperty(t)){var o=RES.getRes(t).root,r={};o.forEach(function(t){var o=t[e]+"_"+t[n];r[o]=t}),this._configData[t]=r}return this._configData[t]},t.prototype.getConfigItem=function(t,e,n,o,r){var i=this.getConfigRoot(t,e,o),a=n+"_"+r;return i[a]},t.getConfig=function(e,n,o){return core.singleton(t).getConfigRoot(e,n,o)},t.getConfigItem=function(e,n,o,r,i){return core.singleton(t).getConfigItem(e,n,o,r,i)},t.getPatientIllustrationConfigItem=function(e,n){return core.singleton(t).getConfigItem("GameConfigPatientIllustration_json","patientId",e,"star",n)},t.getSigninConfigItem=function(e,n){return core.singleton(t).getConfigItem("GameConfigSignIn_json","day",e,"weekGroup",n)},t}();__reflect(DoubleKeyConfig.prototype,"DoubleKeyConfig");var UserData=function(){function t(){}return t.prototype.getHospitalScore=function(){return 0},t}();__reflect(UserData.prototype,"UserData");var NotificationDef=function(){function t(){}return t.TYPE_NET="net",t.TYPE_DATA="data",t.TYPE_EVENT="event",t.CHANGE_USER_INFO=t.TYPE_DATA+"userInfo",t.VISIT_FIREND="visit_firend",t}();__reflect(NotificationDef.prototype,"NotificationDef");var CustomProgress=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=t.call(this)||this,r=new ImageC("loading_di"),i=new ImageC("loading_ding");return o.width=r.width=i.width=e,o._bar=i,o._w=e,o._h=n,o.addChild(r),o.addChild(o._bar),o._bar.scaleX=o._cur=0,o._max=100,o}return __extends(e,t),e.prototype.setProgress=function(t,e){if(0==t&&0==e)return void(this._bar.scaleX=0);this._cur=t,this._max=e;var n=t/e;this._bar.scaleX=n},e.prototype.destroy=function(){this.removeChildren()},e}(egret.Sprite);__reflect(CustomProgress.prototype,"CustomProgress"),window.CustomProgress=CustomProgress;var ImageC=function(t){function e(e){void 0===e&&(e="");var n=t.call(this)||this;return n.md5List={loading_bg:"fe420392",loading_di:"38229d3b",loading_ding:"e4c304d9"},""!=e&&("wxgame"==window.platform.name,e="resource/assets/loading/"+e+"_"+n.md5List[e]+".jpg",n.setUrl(e)),n}return __extends(e,t),e.prototype.setUrl=function(t){this.loader=new egret.ImageLoader,this.loader.addEventListener(egret.Event.COMPLETE,this.onImgLoadEnd,this),this.loader.load(t)},e.prototype.onImgLoadEnd=function(t){var e=this.loader.data;console.log(e);var n=new egret.Texture;n.bitmapData=e,this.texture=n,this.loader.removeEventListener(egret.Event.COMPLETE,this.onImgLoadEnd,this)},e}(egret.Bitmap);__reflect(ImageC.prototype,"ImageC");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var PreLoadView=function(t){function e(){var e=t.call(this)||this;e._pretipstr="初次加载费水费电";var n=egret.MainContext.instance.stage;return e.group=new egret.Sprite,e.addChild(e.group),e.bg=new ImageC("loading_bg"),e.bg.x=n.stageWidth/2-50,e.bg.y=n.stageHeight/2-200,e.group.addChild(e.bg),e.textField=e.createTxt(e._pretipstr,110,970,215877,24),e.textField.width=500,e.progressBar=new CustomProgress(500,20),e.progressBar.y=950,e.progressBar.x=n.stageWidth/2-250,e.group.addChild(e.progressBar),core.addNotification("updateloadingtip",e.updatetip,e),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(){var t=egret.MainContext.instance.stage.stageWidth,e=egret.MainContext.instance.stage.stageHeight,n=this;n.rect=new egret.Shape,n.rect.graphics.beginFill(6406079,1),n.rect.graphics.drawRect(0,0,t,e),n.rect.graphics.endFill(),n.addChildAt(this.rect,0),setTimeout(function(){var t=e-1280;0>t&&(t=0),n.group.y=t/2},50)},e.prototype.createTxt=function(t,e,n,o,r){var i=this,a=new egret.TextField;return a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){i._backFun&&i._backFun()},this),a.text=t,a.x=e,a.y=n,a.textColor=o,a.textAlign="center",a.size=r,this.group.addChild(a),a},e.prototype.updatetip=function(t,e){void 0===e&&(e=null),this._backFun=e,this.textField.textFlow=(new egret.HtmlTextParser).parse(t)},e.prototype.setPreTip=function(t){this._pretipstr=t},e.prototype.onProgress=function(t,e){this.textField.text=this._pretipstr+"("+Math.floor(t/e*100)+"%)",this.progressBar.setProgress(t,e)},e.prototype.onCancel=function(){},e}(egret.Sprite);__reflect(PreLoadView.prototype,"PreLoadView",["RES.PromiseTaskReporter"]),window.PreLoadView=PreLoadView;var GameInitHandler=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.initGame=function(){CountUpdateManager.instance.startTick()},t.prototype.doAfterLogin=function(){console.log("判断是否打开离线收益：",RequestCacheData.instance.getCache().offlineInfo);var t=RequestCacheData.instance.getCache().offlineInfo;if(t&&t.totalRewardInfo){var e={callback:function(){}};core.postNotification(core.QueueBoxMediator.ADD_QUEUE_BOX,"OffLineIncome",e)}var e={callback:function(){}};core.postNotification(core.QueueBoxMediator.ADD_QUEUE_BOX,"SigninComponent",e),core.addNotification(core.QueueBoxMediator.END_QUEUE,this.endQueue,this)},t.prototype.endQueue=function(){core.removeNotification(core.QueueBoxMediator.END_QUEUE,this)},t}();__reflect(GameInitHandler.prototype,"GameInitHandler");var LoginSelect=function(t){function e(){var e=t.call(this)||this;return e.loginList={0:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLptg19",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},1:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt20",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqL2lacyvOiaSu9ldaUNM5w380pj4YpmCqibruFVaVzNCAYfiafzhbm4TibyqTmaFsVsNYQxibjxsVpLEQ/0"},2:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpP21",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqL2lacyvOiaSu9ldaUNM5w380pj4YpmCqibruFVaVzNCAYfiafzhbm4TibyqTmaFsVsNYQxibjxsVpLEQ/0"},3:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt22",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},4:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt23",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},5:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt24",nickName:"测试1",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep8AJ219RRenvjYHRfx6T1U34Jo0dy6Q8S7nkLnj7q3SqoHnQicR4tDrOjmU2vHtoLPWtOJHGxesLQ/0"}},e.loginList2={0:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLptg25",nickName:"扁",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},1:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt126",nickName:"Enger",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqL2lacyvOiaSu9ldaUNM5w380pj4YpmCqibruFVaVzNCAYfiafzhbm4TibyqTmaFsVsNYQxibjxsVpLEQ/0"},2:{loginId:"o-y7T5C72rpdZdgR1U_JzfvxK2rs",nickName:"PP",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83eqL2lacyvOiaSu9ldaUNM5w380pj4YpmCqibruFVaVzNCAYfiafzhbm4TibyqTmaFsVsNYQxibjxsVpLEQ/0"},3:{loginId:"o-y7T5Neq91RrT1Xo3StKwky1_6c",nickName:"木头",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},4:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt929",nickName:"无名氏",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},5:{loginId:"oSPUC0eS0RqEKawF5QjF2byuLpt131",nickName:"goon",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/DYAIOgq83ep8AJ219RRenvjYHRfx6T1U34Jo0dy6Q8S7nkLnj7q3SqoHnQicR4tDrOjmU2vHtoLPWtOJHGxesLQ/0"}},e.skinName="LoginSelectSkin",e}return __extends(e,t),e.prototype.onEnter=function(e,n){n||(this.group_login.visible=!1),t.prototype.onEnter.call(this),this.callback=e;var o=localStorage.getItem("hospital_input_account");this.txt_account.text=o?o:"",this.listener(this.enger,egret.TouchEvent.TOUCH_TAP,this.onEngerLogin.bind(this),this),this.listener(this.pp,egret.TouchEvent.TOUCH_TAP,this.onPpLogin.bind(this),this),this.listener(this.bian,egret.TouchEvent.TOUCH_TAP,this.onBianLogin.bind(this),this),this.listener(this.mutou,egret.TouchEvent.TOUCH_TAP,this.onMutouLogin.bind(this),this),this.listener(this.test,egret.TouchEvent.TOUCH_TAP,this.onTestLogin.bind(this),this),this.listener(this.goon,egret.TouchEvent.TOUCH_TAP,this.onGoonLogin.bind(this),this),this.listener(this.btn_other,egret.TouchEvent.TOUCH_TAP,this.onOther.bind(this),this),this.listener(this.btn_wechat,egret.TouchEvent.TOUCH_TAP,this.onWeiChat.bind(this),this)
},e.prototype.onEngerLogin=function(){e.testLoginData=this.loginList[1],this.doCallback()},e.prototype.onPpLogin=function(){e.testLoginData=this.loginList[2],this.doCallback()},e.prototype.onBianLogin=function(){e.testLoginData=this.loginList[0],this.doCallback()},e.prototype.onMutouLogin=function(){e.testLoginData=this.loginList[3],this.doCallback()},e.prototype.onTestLogin=function(){e.testLoginData=this.loginList[4],this.doCallback()},e.prototype.onGoonLogin=function(){e.testLoginData=this.loginList[5],this.doCallback()},e.prototype.onOther=function(){var t=this.txt_account.text;""==t?t="test"+egret.getTimer():localStorage.setItem("hospital_input_account",t),e.otherData.loginId=t,e.otherData.nickName=t,e.testLoginData=e.otherData,this.doCallback()},e.prototype.doCallback=function(){this.callback&&(this.callback(),this.callback=null)},e.prototype.onWeiChat=function(){window.location.href="https://www.lotiyo.cn/sso?return_url="+encodeURIComponent(window.location.href)},e.otherData={loginId:"",nickName:"xx",sex:1,avatarUrl:"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTKRdf2Hldvia5jLKibLtbsVW45b9ocVs59GjUEjDBK58kPDARF8ESvUGkrdk2xzMwnMUXm54OE4f6SA/0"},e}(core.BaseComponent);__reflect(LoginSelect.prototype,"LoginSelect"),window.LoginSelect=LoginSelect;var NetLogin=function(){function t(t){this.bl_gpid="",this.callback=t,GameHttp.addRequestDefaultParams(),GameVo.wxInfo?this.wxInit():this.localhostLogin()}return t.prototype.localhostLogin=function(){var t=LoginSelect.testLoginData;this.wxInfo={h5game_openid:t.loginId,user:t},this.startServerList(),core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_start"))},t.prototype.wxInit=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.wxInfo={},this.wxInfo.user=GameVo.wxInfo,this.wxInfo.h5game_openid=GameVo.wxInfo.h5game_openid,this.wxInfo.hasOwnProperty("h5game_openid")&&this.startServerList(),[2]})})},t.prototype.startServerList=function(){var t=this;core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_notice_8")),GameHttp.request(PLogin.getServerPath(this.wxInfo.h5game_openid,NetCode.LB_PATH)).then(function(e){t.bl_gpid=e.gpId;var n=e.areaInfo?e.areaInfo[0]:null;if(n){var o=n.status?n.status:0;if(1==o){GameHttp.httpEnable=!1;var r={title:"游戏维护中",text:"游戏维护中,稍后重试",yes:"重试",type:core.PromptState.confirm,no:""};return void core.UI.addBox(core.PromptBox,r).then(function(e){e.show().then(function(){t.startServerList()})})}NetCode.HTTP_SERVER=n.serverUrl,t._areaId=parseInt(n.areaId),core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_notice_6")),t.startLogin()}else core.UI.tooltip(ConfigCenter.getLanguageName("login_notice_4")),core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_notice_5"))})["catch"](function(t){core.UI.tooltip("请求区服失败")})},t.prototype.startLogin=function(){var t=this;core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_notice_9")),GameHttp.request(PLogin.getUserId(this.wxInfo.h5game_openid,this._areaId)).then(function(e){t.loginSuccess(e)})["catch"](function(e){t.loginFail(e)})},t.prototype.loginSuccess=function(t){var e=this,n=GameVo.pageQueue,o="",r=0;n&&n.query&&n.query.gpId&&(o=n.query.gpId,r=n.query.p,isNaN(r)||(r=parseInt(r+"")));var i=r==GameVo.getP()?o:"";if(0==t.exist){({command:NetCode.CREAT_USER,areaId:this._areaId,loginId:this.wxInfo.h5game_openid,name:this.wxInfo.user.nickName,sex:this.wxInfo.user.sex,icon:this.wxInfo.user.avatarUrl,fromGpId:i?i:"",useGpId:this.bl_gpid});GameHttp.request(PUser.createUser(this._areaId,this.wxInfo.h5game_openid,this.bl_gpid,this.wxInfo.user.nickName,this.wxInfo.user.sex,this.wxInfo.user.avatarUrl,i)).then(function(){e.getUserInfoSuccess()})["catch"](function(){e.getUserInfoFail()})}else GameHttp.gpId=t.gpId,core.network.addGlobalParams("gpId",t.gpId),GameHttp.request(PUser.getInfo()).then(function(){e.getUserInfoSuccess()})["catch"](function(){e.getUserInfoFail()})},t.prototype.getUserInfoSuccess=function(){core.postNotification("updateloadingtip",ConfigCenter.getLanguageName("login_success")),this.callback&&(this.callback(),this.callback=null)},t.prototype.getUserInfoFail=function(){core.UI.tooltip(ConfigCenter.getLanguageName("login_player_info_fail"))},t.prototype.loginFail=function(t){t||core.UI.tooltip(ConfigCenter.getLanguageName("login_register_fail"))},t.prototype.registerFail=function(t){core.UI.tooltip(ConfigCenter.getLanguageName("login_fail"))},t}();__reflect(NetLogin.prototype,"NetLogin");var ExtendType;!function(t){t[t.type_farmland=2]="type_farmland",t[t.type_friends=3]="type_friends",t[t.type_assist=5]="type_assist",t[t.type_recruit=7]="type_recruit",t[t.type_patient_remain=41]="type_patient_remain",t[t.type_common=-1]="type_common",t[t.type_patient_list=6]="type_patient_list",t[t.type_welfare=1]="type_welfare",t[t.type_hospital=4]="type_hospital",t[t.type_jump=8]="type_jump",t[t.type_international_rescue=0]="type_international_rescue",t[t.type_friends2=31]="type_friends2"}(ExtendType||(ExtendType={}));var SecondRequestHandler=function(){function t(){this._typeList={}}return t.prototype.afterLoginHanler=function(){GameInitHandler.instance.initGame(),PlatformUtil.isWxPlatform()},t.prototype.isCached=function(t){return this._typeList[t]},t.prototype.delCacheType=function(t){this._typeList.hasOwnProperty(t)&&(this._typeList[t]=null,delete this._typeList[t])},t.prototype.getFriendInfo=function(){var t=this;return new Promise(function(e,n){return t._typeList[ExtendType.type_friends]?void e():Promise.all([t.requestFriendInfo()]).then(function(){e()})["catch"](function(){console.log("请求失败，请稍后重试。"),n()})})},t.prototype.requestFriendInfo=function(){var t=this;return new Promise(function(e,n){console.log("请求好友数据"),GameHttp.request(PUser.getInfoSecond(ExtendType.type_friends)).then(function(n){t._typeList[ExtendType.type_friends]=!0,e()})["catch"](function(t){console.log("请求失败，请稍后重试。"),n()})})},t}();__reflect(SecondRequestHandler.prototype,"SecondRequestHandler");var CommonPanel=function(t){function e(){var e=t.call(this)||this;return e.name="CommonPanel",e.skinName="CommonPanelSkin",e}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e}(core.BaseComponent);__reflect(CommonPanel.prototype,"CommonPanel"),window.CommonPanel=CommonPanel;var MainScene=function(t){function e(){var e=t.call(this)||this;return e.name="MainScene",e.skinName="MainSceneSkin",e}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.listener(this.btnRank,egret.TouchEvent.TOUCH_TAP,this.openRank,this)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e.prototype.openRank=function(){},e}(core.BaseComponent);__reflect(MainScene.prototype,"MainScene"),window.MainScene=MainScene;var ConfigValuesVO=function(){function t(){this.initValue()}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.initValue=function(){ConfigCenter.getConfigRoot("GameConfigValues_json","key");this.maxJumpGameCount=parseInt(ConfigUtil.getGameConfigValue("maxJumpGameCount")),this.jumpGameCountRecoverUnit=parseInt(ConfigUtil.getGameConfigValue("jumpGameCountRecoverUnit")),this.jumpGameCountRecoverSpeed=parseInt(ConfigUtil.getGameConfigValue("jumpGameCountRecoverSpeed"))},t}();__reflect(ConfigValuesVO.prototype,"ConfigValuesVO");var CountUpdateManager=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.startTick=function(){},t.prototype.updateCountTick=function(){this.updateJumpCount()},t.prototype.updateJumpCount=function(){},t}();__reflect(CountUpdateManager.prototype,"CountUpdateManager");var FocusController=function(){function t(){this._touchType=0,this._childLayerCount=0}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.test=function(t,e){void 0===e&&(e=2),this._touchType=1;core.UI.getScene().scroller.viewport},t.prototype.setTouchType=function(t){this._touchType=t},t.prototype.setChildCount=function(t){this._childLayerCount=t},t.prototype.setType=function(t,e){this._touchType=t,this._childLayerCount=e},t.prototype.startFocus=function(e,n,o){var r=this;return void 0===n&&(n=2),void 0===o&&(o=2e3),new Promise(function(i){var a=r.getScrollZoomHV(e,n,0,r._childLayerCount),s=core.UI.getScene().scroller.viewport;r.setStageTouchEnabled(!1),egret.Tween.get(s).to({scrollH:a.x,scrollV:a.y,scaleX:n,scaleY:n},o).call(function(){egret.Tween.removeTweens(s),r._touchType==t.Touch_Type_Start&&r.setStageTouchEnabled(!0),i()})})},t.prototype.setStageTouchEnabled=function(t){egret.MainContext.instance.stage.touchChildren=t},t.prototype.stopFocus=function(t,e,n){var o=this;return void 0===e&&(e=!1),void 0===n&&(n=1e3),new Promise(function(r){var i=core.UI.getScene().scroller.viewport,a=o.getScrollZoomHV(t,1,1,o._childLayerCount),s=a.x,c=a.y;e?(o.setStageTouchEnabled(!1),egret.Tween.get(i).to({scrollH:s,scrollV:c,scaleX:1,scaleY:1},n).call(function(){egret.Tween.removeTweens(i),o.revertData(),r()})):(i.scaleX=i.scaleY=1,i.scrollH=s,i.scrollV=c,o.revertData(),r())})},t.prototype.revertData=function(){this.setStageTouchEnabled(!0),this._touchType=0,this._childLayerCount=0},t.prototype.focusPoint=function(t,e){void 0===e&&(e=0);var n=core.UI.getScene().scroller.viewport,o=n.scaleX;e>0&&(o=e,n.scaleX=n.scaleY=e);var r=this.getScrollZoomHV(t,0,o);n.scrollH=r.x,n.scrollV=r.y},t.prototype.focusPointTween=function(t,e,n){var o=this;return void 0===e&&(e=1),void 0===n&&(n=1e3),new Promise(function(r){var i=core.UI.getScene().scroller.viewport,a=o.getScrollZoomHV(t,0,e);o.setStageTouchEnabled(!1),egret.Tween.get(i).to({scrollH:a.x,scrollV:a.y,scaleX:e,scaleY:e},n).call(function(){egret.Tween.removeTweens(i),o.setStageTouchEnabled(!0),r()})})},t.prototype.getScrollZoomHV=function(t,e,n,o){void 0===e&&(e=2),void 0===n&&(n=0),void 0===o&&(o=0);var r=egret.MainContext.instance.stage,i=core.UI.getScene().scroller.viewport;e=i.scaleX*e,n>0&&(e=n);var a;a=t instanceof egret.DisplayObject?this.getDisplayObjectPositon(t,o):t;var s=a.x*e-(r.stageWidth>>1),c=a.y*e-(r.stageHeight>>1);return s=Math.min(s,i.contentWidth*e-r.stageWidth),s=Math.max(s,0),c=Math.min(c,i.contentHeight*e-r.stageHeight),c=Math.max(c,0),new egret.Point(s/e,c/e)},t.prototype.getScenePoint=function(t,e,n,o,r){void 0===n&&(n=2),void 0===o&&(o=0),void 0===r&&(r=0);var i,a=egret.MainContext.instance.stage;i=t instanceof egret.DisplayObject?this.getDisplayObjectPositon(t,r):t;var s;s=e instanceof egret.DisplayObjectContainer?new egret.Point(e.x,e.y):s;var c=(a.stageWidth>>1)-i.x*n,u=(a.stageHeight>>1)-i.y*n;return c=Math.max(c,a.stageWidth-s.x*n),c=Math.min(c,0),u=Math.max(u,a.stageHeight-s.y*n),u=Math.min(u,0),new egret.Point(c,u)},t.prototype.getDisplayObjectPositon=function(t,e){void 0===e&&(e=0);for(var n,o=0,r=0,i=0;e>=i;i++)0==i?(o=t.x,r=t.y,n=t.parent):(o+=n.x,r+=n.y,n=n.parent);return new egret.Point(o,r)},t.Touch_Type_All=0,t.Touch_Type_Start=1,t}();__reflect(FocusController.prototype,"FocusController");var WxRank=function(){function t(){this._isDisplay=!1}return t.prototype.pushRankData=function(){var t=(RequestCacheData.instance,core.singleton(UserData).getHospitalScore()),e=[{key:"score",value:t.toString()},{key:"level",value:"5"}],n=core.singleton(SecondRequestHandler);n.isCached(ExtendType.type_common)&&e.push({key:"likeCount",value:"55"}),n.isCached(ExtendType.type_farmland)&&e.push({key:"donate",value:"10"}),n.isCached(ExtendType.type_international_rescue)&&e.push({key:"honor",value:"20"}),platform.setUserCloudStorage(e)},t.prototype.loadUserData=function(){if(PlatformUtil.isNamePlatform(PlatformUtil.WX_PLATFORM)){var t=window.platform;t.openDataContext.postMessage({year:(new Date).getFullYear(),command:"userData"})}},t.prototype.loadAsset=function(){if(PlatformUtil.isNamePlatform(PlatformUtil.WX_PLATFORM)){var t=window.platform;"wxgame"==t.name&&t.openDataContext&&t.openDataContext.postMessage({command:"loadRes"})}},t.prototype.showRank=function(e){if(PlatformUtil.isNamePlatform(PlatformUtil.WX_PLATFORM)){this._isDisplay&&this.closeRank();var n=window.platform,o=ConfigCenter.getLanguageName("scoreboard");e==t.open_likeCount?o=ConfigCenter.getLanguageName("point_list"):e==t.open_donate&&(o=ConfigCenter.getLanguageName("honor_list"));var r=egret.MainContext.instance.stage;return this._bitmap=n.openDataContext.createDisplayObject(null,r.stageWidth,r.stageHeight),this._bitmap.touchEnabled=!0,this._isDisplay=!0,n.openDataContext.postMessage({text:o,type:e,year:(new Date).getFullYear(),command:"open"}),this._bitmap}},t.prototype.closeRank=function(){if(PlatformUtil.isNamePlatform(PlatformUtil.WX_PLATFORM)&&this._isDisplay){var t=window.platform;t.openDataContext.postMessage({year:(new Date).getFullYear(),command:"close"}),core.display.removeFromParent(this._bitmap),this._bitmap=null,this._isDisplay=!1}},t.open_score="score",t.open_likeCount="likeCount",t.open_donate="donate",t.open_honor="honor",t}();__reflect(WxRank.prototype,"WxRank");var BoxAnimation=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.open=function(){var t=this;return new Promise(function(e,n){var o=t._component.getChildByName("boxGroup"),r=t._component.maskBg;r&&(r.alpha=0,r.scaleX=r.scaleY=0,egret.Tween.get(r).to({scaleX:1,scaleY:1,alpha:1},150).call(function(){egret.Tween.removeTweens(r)},t)),o?(o.alpha=0,o.scaleX=o.scaleY=0,egret.Tween.get(o).to({scaleX:1,scaleY:1,alpha:1},150).call(function(){egret.Tween.removeTweens(o),e()},t)):e()})},e.prototype.close=function(){var t=this;return new Promise(function(e,n){var o=t._component.getChildByName("boxGroup"),r=t._component.maskBg;r&&egret.Tween.get(r).to({scaleX:0,scaleY:0,alpha:0},150).call(function(){egret.Tween.removeTweens(r)},t),o?egret.Tween.get(o).to({scaleX:0,scaleY:0,alpha:0},150).call(function(){egret.Tween.removeTweens(o),e()},t):e()})},e}(UiAnimation);__reflect(BoxAnimation.prototype,"BoxAnimation");var EUIAnimation=function(t){function e(e,n){var o=t.call(this)||this;return o.current=0,o.dirList=[[-1,1],[1,1],[1,1],[-1,1]],o.touchEnabled=!1,o.touchChildren=!1,o._props=n?n:{groupName:"ac"},void 0===o._props.startPlay&&(o._props.startPlay=!0),void 0===o._props.loop&&(o._props.loop=!1),void 0===o._props.specailLoop&&(o._props.specailLoop=!1),o.skinName=e,o}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.anchorOffsetX=this.width>>1,this.anchorOffsetY=this.height>>1,this._props.startPlay&&this.startPlay()},e.prototype.startPlay=function(t){void 0===t&&(t=null);var e=t?t:this._props.groupName;this.playAnimation(this[e],this._props.loop,this._props.specailLoop)},e.prototype.stopPlay=function(t){void 0===t&&(t=null);var e=t?t:this._props.groupName;this.stopAnimation(this[e])},e.prototype.playAnimation=function(t,e,n){if(void 0===n&&(n=!1),t){if(e&&!n)for(var o in t.items)t.items[o].props={loop:!0};t.play(0),t.hasEventListener(egret.Event.COMPLETE)||t.addEventListener(egret.Event.COMPLETE,this.onComplete,this)}},e.prototype.stopAnimation=function(t){t&&t.stop()},e.prototype.onComplete=function(t){this._props.specailLoop&&this.startPlay(),this._props.loop||this._props.specailLoop||!this._props.completeFun||this._props.completeFun.apply(null,this)},e.prototype.startMove=function(t){if(void 0===t&&(t=null),this.lineList){0==this.current?this.current=1:this.current==this.lineList.length-1?this.current=this.lineList.length-2:this.current=Math.random()>.5?this.current+1:this.current-1;var e=this.lineList[this.current][0][0],n=this.lineList[this.current][0][1];this.disDirection(this.x,this.y,e,n),this.moveTo(e,n,this.startMove)}},e.prototype.disDirection=function(t,e,n,o){var r=0;r+=o>=e?1:0,r+=n>=t?2:0,this.scaleX=this.dirList[r][0],this.scaleY=this.dirList[r][1]},e.prototype.moveTo=function(t,e,n){var o=this;void 0===n&&(n=null);var r=MathUtils.pointDistance(this.x,this.y,t,e);egret.Tween.get(this).to({x:t,y:e},15*r).call(function(){egret.Tween.removeTweens(o),o.startMove()},this)},e.prototype.onExit=function(){this[this._props.groupName]&&this[this._props.groupName].removeEventListener(egret.Event.COMPLETE,this.onComplete,this),egret.Tween.removeTweens(this),t.prototype.onExit.call(this)},e}(core.BaseComponent);__reflect(EUIAnimation.prototype,"EUIAnimation"),window.EUIAnimation=EUIAnimation;var core;!function(t){var e=function(t){function e(){return t.call(this,e.NAME)||this}return __extends(e,t),e.prototype.onRegister=function(){},e.prototype.onRemove=function(){},e.prototype.listNotificationInterests=function(){var e=[];return e.concat(t.prototype.listNotificationInterests.call(this))},e.prototype.handleNotification=function(t){t.getName()},e.NAME="CoreMediator",e}(t.Mediator);t.CoreMediator=e,__reflect(e.prototype,"core.CoreMediator")}(core||(core={}));var SceneAnimation=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.open=function(){var t=this;return new Promise(function(e,n){var o=t._component.getChildByName("boxGroup");o?(o.alpha=0,o.scaleX=o.scaleY=0,egret.Tween.get(o).to({scaleX:1,scaleY:1,alpha:1},250).call(function(){egret.Tween.removeTweens(o),e()},t)):e()})},e.prototype.close=function(){var t=this;return new Promise(function(e,n){var o=t._component.getChildByName("boxGroup");o?egret.Tween.get(o).to({scaleX:0,scaleY:0,alpha:0},250).call(function(){egret.Tween.removeTweens(o),e()},t):e()})},e}(UiAnimation);__reflect(SceneAnimation.prototype,"SceneAnimation");var TipAnimation=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.open=function(){var t=this;return new Promise(function(e,n){t._component.visible=!0,t._component.scaleX=t._component.scaleY=2,egret.Tween.get(t._component).to({scaleX:1,scaleY:1},300).wait(150).call(function(){egret.Tween.removeTweens(t._component),e()},t)})},e}(UiAnimation);__reflect(TipAnimation.prototype,"TipAnimation");var GameShare=function(){function t(){}return t.getQueryStr=function(t){void 0===t&&(t=null);var e="gpId="+RequestCacheData.instance.getCacheByKey("gpId")+"&p="+GameVo.getP();if(t)for(var n in t)e+="&"+n+"="+t[n];return e},t.getShareInfo=function(e){void 0===e&&(e={}),e.hasOwnProperty("shareType")||(e.shareType=ShareRewardType.Random);var n={},o="",r="",i=JSON.parse(ConfigUtil.getGameConfigValue("shareTitleRandom_"+e.shareType)),a=i?i.length:0;switch(e.shareType){case ShareRewardType.NewPatient:var s=ConfigUtil.getPatientConfigById(e.patientId);s&&(a=s.talkRand.length,o=ConfigCenter.getLanguageName("patient_talk_"+s.talkRand[Math.floor(Math.random()*a)]),r=NetCode.RES_ROOT_PATH+"share/patient/"+e.patientId+".jpg?v="+(new Date).getTime());break;case ShareRewardType.PutPatient:case ShareRewardType.PutCattle:o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)]),r=NetCode.RES_ROOT_PATH+"share/put/"+e.patientId+".jpg?v="+(new Date).getTime();break;case ShareRewardType.AppointSuccess:case ShareRewardType.AppointFail:o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)]);break;case ShareRewardType.BuildingUp:o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)]),r=NetCode.RES_ROOT_PATH+"share/building/building_"+e.level+".jpg?v="+(new Date).getTime();break;case ShareRewardType.HospitalUp:o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)]),r=NetCode.RES_ROOT_PATH+"share/hospital/hospital_"+e.level+".jpg?v="+(new Date).getTime();break;case ShareRewardType.Ransom:o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)]),r=NetCode.RES_ROOT_PATH+"share/other/ransom.jpg?v="+(new Date).getTime();break;default:a=RequestCacheData.instance.getCacheByKey("maxRandomShareCount"),a=a?a:0;var c=Math.floor(Math.random()*a);r=NetCode.RES_ROOT_PATH+"share/random/shareImg_"+c+".jpg?v="+(new Date).getTime();var u="shareTitleRandom_0_"+c;i=JSON.parse(ConfigUtil.getGameConfigValue(u)),a=i.length,o=ConfigCenter.getLanguageName(i[Math.floor(Math.random()*a)])}return n.title=o,n.imageUrl=r,n.queryStr=t.getQueryStr(e.queryData),n.clipScreen=e.clipScreen?!0:!1,n.clipScreen&&(n.x=e.x+core.UI.instance.x,n.y=e.y+core.UI.instance.y,n.stageW=egret.MainContext.instance.stage.stageWidth,n.stageH=egret.MainContext.instance.stage.stageHeight,n.width=e.hasOwnProperty("width")?e.width:500,n.height=e.hasOwnProperty("height")?e.height:400),n},t.onShareGame=function(e,n,o,r){void 0===e&&(e=0),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r={}),t.getAdTodayLeftTime(e)<t.getAdTodayLeftTime(e,!0)?"wxgame"==window.platform.name?(console.log("wxgame share"),t.shareBackArg=[e,n,o],platform.shareAppMessage(t.getShareInfo(r)).then(function(r){t.shareAdvSend(e,n,o)})):t.shareAdvSend(e,n,o):(console.log("今日分享次数已用完，没有奖励"),platform.shareAppMessage(t.getShareInfo(r)))},t.onShareGameSimple=function(e){void 0===e&&(e={}),t.onShareGame(0,null,null,e)},t.onShareBack=function(){t.shareBackArg&&(console.log("分享按钮：",t.shareBackArg),t.shareAdvSend.apply(t,t.shareBackArg),t.shareBackArg=null)},t.shareAdvSend=function(t,e,n){void 0===n&&(n=null),console.log("分享游戏回调 --",t,e,n),t?(e.command=t,GameHttp.request(PUser.gameShare()).then(function(t){console.log("分享广告消息响应 --",t),RequestCacheData.instance.upateAdInfo(t),n&&n(t)})):n&&n(),console.log("开始加载场景资源")},t.createRewardedVideoAd=function(e,n,o,r){if(void 0===e&&(e=0),void 0===n&&(n=null),void 0===o&&(o=null),void 0===r&&(r=null),this.isLookEnough())return void core.UI.tooltip("今日广告次数已用完,明天再来吧");if(t.getAdTodayLeftTime(e)<t.getAdTodayLeftTime(e,!0)){if(t.inAdv){var i=ConfigCenter.getLanguageName("radio_wait_to_load");return void core.UI.tooltip(i)}var a="adunit-8c683833fc42bf03";PlatformUtil.isSupportAdvertisement()?(t.inAdv=!0,platform.createRewardedVideoAd(a).then(function(i){t.inAdv=!1,i?(console.log("激励广告播放完成"),t.shareAdvSend(e,n,o)):(console.log("中途推出广告"),r&&r())})):t.shareAdvSend(e,n,o)}else core.UI.tooltip("今日广告次数已用完,明天再来吧")},t.getAdTodayLeftTime=function(t,e){void 0===e&&(e=!1),t||(t=0);var n,o={24054:"lookJumpGameAdCount",24055:"lookAddMoneyAdCount",24056:"lookSignInAdCount",24071:"addCoinAfterAd",24057:"lookPatientCountAdCount",23001:"lookRefreshRecruitAdCount",24036:"sharePayRansomCount"},r={24054:"maxLookJumpGameAdCount",24055:"maxLookAddMoneyAdCount",24056:"maxLookSignInAdCount",24071:"maxLookAddCoinAdCount",24057:"maxLookPatientCountAdCount",23001:"maxLookRefreshRecruitAdCount",24036:"maxSharePayRansomCount"};if(e){if(t){n=r[t.toString()];var i=ConfigUtil.getGameConfigValue(n);return i?parseInt(i):1}return 1}if(t){n=o[t.toString()];var i=RequestCacheData.instance.getCacheByKey("adInfo")[n];return i?i:0}return 0},t.isLookEnough=function(){var t=["lookJumpGameAdCount","lookJumpGameRandomRewardAdCount","lookAddMoneyAdCount","lookAddCoinAdCount","lookSignInAdCount","lookPatientCountAdCount"],e=0;t.forEach(function(t){e+=RequestCacheData.instance.getCacheByKey("adInfo")[t]||0});var n=ConfigUtil.getGameConfigValue("maxAllAdCount")||"8";return n=parseInt(n),e>=n},t.isVedioCanSee=function(e){var n=t.getAdTodayLeftTime(e,!0),o=t.getAdTodayLeftTime(e);return n>o},t.inAdv=!1,t}();__reflect(GameShare.prototype,"GameShare");var PlatformUtil=function(){function t(){}return t.isNamePlatform=function(t){var e=window.platform.name;return e==t},t.isWxPlatform=function(){return window.platform.name==t.WX_PLATFORM},t.getPlatform=function(){return window.platform},t.isSupportShare=function(t){void 0===t&&(t=!1);var e=!1,n=window.platform.name;if(n==this.WX_PLATFORM&&(e=!0),t&&!e){var o=ConfigCenter.getLanguageName("share_is_unSupport");core.UI.tooltip(o)}return e},t.isSupportAdvertisement=function(t){void 0===t&&(t=!1);var e=!1,n=window.platform.name;if(n==this.WX_PLATFORM&&(e=!0),t&&!e){var o=ConfigCenter.getLanguageName("vedio_is_unSupport");core.UI.tooltip(o)}return e},t.isSupportRank=function(){var t=window.platform.name;return t==this.WX_PLATFORM?!0:!1},t.pushRankData=function(){if(this.isSupportRank()){var t=this.getPlatform();t.name==this.WX_PLATFORM&&core.singleton(WxRank).pushRankData()}},t.WX_PLATFORM="wxgame",t}();__reflect(PlatformUtil.prototype,"PlatformUtil");var GameHttp=function(){function t(){}return t.addRequestDefaultParams=function(){""==this._uniqueID&&(this._uniqueID=core.network.generateUUID()),core.network.addGlobalParams("mac",this._uniqueID),core.network.addGlobalParams("gpId",t.gpId),core.network.addGlobalParams("p",GameVo.getP()),core.network.addGlobalParams("versionCode",NetCode.versionCode),core.Config.httpBase64=!0,core.Config.httpRequestMethod=egret.HttpMethod.POST},t.request=function(t){var e=RequestCacheData.instance,n=e.serverTime+0;n=n?n:(new Date).getTime(),""==egret.localStorage.getItem("request_mac")&&egret.localStorage.setItem("request_mac",n+"");var o=t.params;return t.params={},t.params.root=o,t.params.hasOwnProperty("tc")||(t.params.tc=Math.floor(n/1e3)),t.params.opId=core.network.generateUUID(),t.params.sign=core.network.getSign(t.params.root),console.log("GameHttp.request::",t),core.request(t)},t.IsGet=!1,t.gpId="",t.p=0,t._uniqueID="",t.httpEnable=!0,t.ingoreList=[NetCode.GET_USER_INFO_BY_ID,NetCode.BACK_PAY],t}();__reflect(GameHttp.prototype,"GameHttp");var core;!function(t){function e(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];for(var r=t.items,i=!0,a=0;a<r.length;a++){var s=r[a];if(s[e]){var c=s[e].apply(s,__spread(n));c===!1&&(i=!1)}}return i}var n=function(){function t(){this._hookMap=[]}return t.prototype.register=function(t){this._hookMap.push(t)},t.prototype.remove=function(t){var e=this._hookMap.indexOf(t);-1!=e&&this._hookMap.splice(e,1)},t.prototype.reset=function(){this._hookMap=[]},Object.defineProperty(t.prototype,"items",{get:function(){return this._hookMap},enumerable:!0,configurable:!0}),t}();t.Hook=n,__reflect(n.prototype,"core.Hook",["core.IHook"]);var o=function(){function t(){this.ui=new n,this.button=new n,this.network=new n,this.socket=new n}return t}();t.Hooks=o,__reflect(o.prototype,"core.Hooks",["core.IHooks"]),t.hooks=new o,t.invokeHook=e}(core||(core={}));var PLogin={getServerPath:function(t,e){return _p_(NetCode.GET_SERVERPATH,{loginId:t},!1,e)},getUserId:function(t,e,n){return _p_(NetCode.GET_USER_ID,{loginId:t,areaId:e},n)}},PUser={getInfo:function(){return _p_(NetCode.GET_USER_INFO_BY_ID)},getInfoSecond:function(t){return _p_(NetCode.SECOND_USER_DATA)},createUser:function(t,e,n,o,r,i,a){return _p_(NetCode.CREAT_USER,{areaId:t,loginId:e,useGpId:n,name:o,sex:r,icon:i,fromGpId:a})},pushError:function(t){return _p_(NetCode.PUSH_ERROE,{log:t})},syncTime:function(t){return _p_(NetCode.SYNC_TIME)},gameShare:function(){return _p_(NetCode.SYNC_TIME)}},RequestCacheData=function(){function t(){this._cacheData={},this.lastSetUsrCloundTime=0}return Object.defineProperty(t,"instance",{get:function(){return this._instance||(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.setCache=function(t){switch(this.updataAnyAway(t),t.command){case NetCode.CLEAR_DAILY_INFO:this.updateDailyInfo(t);break;case NetCode.GET_USER_INFO_BY_ID:var e=t.gpInfo;this._cacheData=e,this.setUserCloudStorage(),console.log("获得服务端数据时间:",(new Date).getTime());break;case NetCode.FINISH_GUIDE_TASK:this._cacheData.guideStep=t.guideStep,this._cacheData.weakGuideSteps=t.weakGuideSteps?t.weakGuideSteps:[]}},Object.defineProperty(t.prototype,"serverTime",{get:function(){var t=(new Date).getTime();return 1e3*this._serverTime+t-this._clientTime},set:function(t){this._serverTime=t,this._clientTime=(new Date).getTime();var e=new Date(1e3*this._serverTime),n=e.getFullYear(),o=e.getMonth(),r=e.getDate();new Date(n,o,r,23,59,59);egret.clearInterval(this._severTimeId),this._severTimeId=egret.setInterval(this.requestSeverTime,this,3e4),egret.clearInterval(this._dailyDataTimeId),this._dailyDataTimeId=egret.setInterval(this.requestDailyData,this,5e3)},enumerable:!0,configurable:!0}),t.prototype.requestSeverTime=function(){""!=GameHttp.gpId&&(GameHttp.request(PUser.syncTime(Math.floor(this.serverTime/1e3))),this.setUserCloudStorage())},t.prototype.requestDailyData=function(t){this.serverTime>=1e3*this._cacheData.nextResetTime&&GameHttp.request({command:NetCode.CLEAR_DAILY_INFO})},t.prototype.updataAnyAway=function(t){if(1!=t.command){var e=[];t.costInfo&&(t.costInfo.forEach(function(t){t.iscost=!0}),e=e.concat(t.costInfo)),e=t.rewardInfo?e.concat(t.rewardInfo):e}},t.prototype.updateDailyInfo=function(t){var e=["command","opId","sc"];for(var n in t)if(-1==e.indexOf(n))if("lastHonorRankRewardInfo"!=n)switch(this._cacheData[n]=t[n],n){case"dailyTaskInfo":}else this._cacheData.lastHonorRankInfo={list:[],myRank:t.lastHonorRankRewardInfo.myRank,rankRewardRecv:t.lastHonorRankRewardInfo.rankRewardRecv}},t.prototype.setUserCloudStorage=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n,o,r,i=this;return __generator(this,function(a){return t=window.platform,"wxgmae"!=t.name?[2]:(e=(new Date).getTime(),n=this._cacheData.likeCount,e-this.lastSetUsrCloundTime>6e4&&(o=core.singleton(UserData).getHospitalScore(),r=[{key:"score",value:o.toString()},{key:"likeCount",value:n.toString()}],t.setUserCloudStorage(r).then(function(){i.lastSetUsrCloundTime=e})),[2])})})},t.prototype.upateAdInfo=function(t){},t.prototype.getCache=function(){return this._cacheData||null},t.prototype.getCacheByKey=function(t){return this._cacheData?this._cacheData[t]:null},t}();__reflect(RequestCacheData.prototype,"RequestCacheData",["IRequestCacheData"]);var RequestError=function(){function t(){}return t.catchError=function(t){if(t){t.sc}},t}();__reflect(RequestError.prototype,"RequestError"),window.Main=Main;